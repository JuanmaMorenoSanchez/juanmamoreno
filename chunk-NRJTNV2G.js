import{a as zr}from"./chunk-WNLJE6EU.js";import{a as se,b as Lr,c as Hr,d as U,g as jr,k as Br,l as Vr,n as be,o as $r}from"./chunk-HMJYS4Q7.js";import{$ as ve,B as cr,Ca as gr,Db as Mr,F as bt,Ga as yr,Gb as Dr,H as ur,Ha as Ee,Hb as Rr,I as te,Ia as vr,J as lr,Ja as ee,La as Se,Ma as Er,P as fr,Qa as Ut,R as hr,Ra as xt,Sa as Ct,T as dr,Ta as Sr,Ua as _r,Va as Ir,W as Ft,Wa as br,Wb as Nr,X as ct,Xa as Ar,Xb as Fr,Y as tt,Ya as wr,Za as xr,_ as P,_a as F,a as nr,ba as At,da as v,db as Ot,ea as Q,f as q,fb as Cr,g as ot,h as Xt,ha as pr,j as at,k as j,l as Zt,m as V,n as or,o as Jt,ob as Tr,pb as _e,q as R,ta as mr,w as ar,wb as Pr,xb as re,xc as Ur,ya as wt,yb as ie,yc as Or,z as It,za as ut,zb as Ie,zc as kr}from"./chunk-4LE3JLCT.js";import{a as c,b as p,c as sr,d as Gt}from"./chunk-4X36HX5K.js";var we=class extends Hr{supportsDOMEvents=!0},xe=class i extends we{static makeCurrent(){Lr(new i)}onAndCancel(r,t,e,s){return r.addEventListener(t,e,s),()=>{r.removeEventListener(t,e,s)}}dispatchEvent(r,t){r.dispatchEvent(t)}remove(r){r.remove()}createElement(r,t){return t=t||this.getDefaultDocument(),t.createElement(r)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(r){return r.nodeType===Node.ELEMENT_NODE}isShadowRoot(r){return r instanceof DocumentFragment}getGlobalEventTarget(r,t){return t==="window"?window:t==="document"?r:t==="body"?r.body:null}getBaseHref(r){let t=Pi();return t==null?null:Mi(t)}resetBaseElement(){kt=null}getUserAgent(){return window.navigator.userAgent}getCookie(r){return jr(document.cookie,r)}},kt=null;function Pi(){return kt=kt||document.querySelector("base"),kt?kt.getAttribute("href"):null}function Mi(i){return new URL(i,document.baseURI).pathname}var Ce=class{addToWindow(r){tt.getAngularTestability=(e,s=!0)=>{let n=r.findTestabilityInTree(e,s);if(n==null)throw new ct(5103,!1);return n},tt.getAllAngularTestabilities=()=>r.getAllTestabilities(),tt.getAllAngularRootElements=()=>r.getAllRootElements();let t=e=>{let s=tt.getAllAngularTestabilities(),n=s.length,o=function(){n--,n==0&&e()};s.forEach(a=>{a.whenStable(o)})};tt.frameworkStabilizers||(tt.frameworkStabilizers=[]),tt.frameworkStabilizers.push(t)}findTestabilityInTree(r,t,e){if(t==null)return null;let s=r.getTestability(t);return s??(e?se().isShadowRoot(t)?this.findTestabilityInTree(r,t.host,!0):this.findTestabilityInTree(r,t.parentElement,!0):null)}},Di=(()=>{class i{build(){return new XMLHttpRequest}static \u0275fac=function(e){return new(e||i)};static \u0275prov=P({token:i,factory:i.\u0275fac})}return i})(),Te=new At(""),Gr=(()=>{class i{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,e){this._zone=e,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,e,s,n){return this._findPluginFor(e).addEventListener(t,e,s,n)}getZone(){return this._zone}_findPluginFor(t){let e=this._eventNameToPlugin.get(t);if(e)return e;if(e=this._plugins.find(n=>n.supports(t)),!e)throw new ct(5101,!1);return this._eventNameToPlugin.set(t,e),e}static \u0275fac=function(e){return new(e||i)(v(Te),v(wt))};static \u0275prov=P({token:i,factory:i.\u0275fac})}return i})(),oe=class{_doc;constructor(r){this._doc=r}manager},ne="ng-app-id";function Kr(i){for(let r of i)r.remove()}function Wr(i,r){let t=r.createElement("style");return t.textContent=i,t}function Ri(i,r,t,e){let s=i.head?.querySelectorAll(`style[${ne}="${r}"],link[${ne}="${r}"]`);if(s)for(let n of s)n.removeAttribute(ne),n instanceof HTMLLinkElement?e.set(n.href.slice(n.href.lastIndexOf("/")+1),{usage:0,elements:[n]}):n.textContent&&t.set(n.textContent,{usage:0,elements:[n]})}function Pe(i,r){let t=r.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",i),t}var Xr=(()=>{class i{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,e,s,n={}){this.doc=t,this.appId=e,this.nonce=s,this.isServer=be(n),Ri(t,e,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,e){for(let s of t)this.addUsage(s,this.inline,Wr);e?.forEach(s=>this.addUsage(s,this.external,Pe))}removeStyles(t,e){for(let s of t)this.removeUsage(s,this.inline);e?.forEach(s=>this.removeUsage(s,this.external))}addUsage(t,e,s){let n=e.get(t);n?n.usage++:e.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,s(t,this.doc)))})}removeUsage(t,e){let s=e.get(t);s&&(s.usage--,s.usage<=0&&(Kr(s.elements),e.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Kr(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[e,{elements:s}]of this.inline)s.push(this.addElement(t,Wr(e,this.doc)));for(let[e,{elements:s}]of this.external)s.push(this.addElement(t,Pe(e,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,e){return this.nonce&&e.setAttribute("nonce",this.nonce),this.isServer&&e.setAttribute(ne,this.appId),t.appendChild(e)}static \u0275fac=function(e){return new(e||i)(v(U),v(Ee),v(Se,8),v(ee))};static \u0275prov=P({token:i,factory:i.\u0275fac})}return i})(),Ae={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Re=/%COMP%/g;var Zr="%COMP%",Ni=`_nghost-${Zr}`,Fi=`_ngcontent-${Zr}`,Ui=!0,Oi=new At("",{providedIn:"root",factory:()=>Ui});function ki(i){return Fi.replace(Re,i)}function Li(i){return Ni.replace(Re,i)}function Jr(i,r){return r.map(t=>t.replace(Re,i))}var Yr=(()=>{class i{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,e,s,n,o,a,l,u=null,f=null){this.eventManager=t,this.sharedStylesHost=e,this.appId=s,this.removeStylesOnCompDestroy=n,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=u,this.tracingService=f,this.platformIsServer=be(a),this.defaultRenderer=new Lt(t,o,l,this.platformIsServer,this.tracingService)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;this.platformIsServer&&e.encapsulation===Ut.ShadowDom&&(e=p(c({},e),{encapsulation:Ut.Emulated}));let s=this.getOrCreateRenderer(t,e);return s instanceof ae?s.applyToHost(t):s instanceof Ht&&s.applyStyles(),s}getOrCreateRenderer(t,e){let s=this.rendererByCompId,n=s.get(e.id);if(!n){let o=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,d=this.platformIsServer,y=this.tracingService;switch(e.encapsulation){case Ut.Emulated:n=new ae(l,u,e,this.appId,f,o,a,d,y);break;case Ut.ShadowDom:return new Me(l,u,t,e,o,a,this.nonce,d,y);default:n=new Ht(l,u,e,f,o,a,d,y);break}s.set(e.id,n)}return n}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(e){return new(e||i)(v(Gr),v(Xr),v(Ee),v(Oi),v(U),v(ee),v(wt),v(Se),v(Er,8))};static \u0275prov=P({token:i,factory:i.\u0275fac})}return i})(),Lt=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(r,t,e,s,n){this.eventManager=r,this.doc=t,this.ngZone=e,this.platformIsServer=s,this.tracingService=n}destroy(){}destroyNode=null;createElement(r,t){return t?this.doc.createElementNS(Ae[t]||t,r):this.doc.createElement(r)}createComment(r){return this.doc.createComment(r)}createText(r){return this.doc.createTextNode(r)}appendChild(r,t){(qr(r)?r.content:r).appendChild(t)}insertBefore(r,t,e){r&&(qr(r)?r.content:r).insertBefore(t,e)}removeChild(r,t){t.remove()}selectRootElement(r,t){let e=typeof r=="string"?this.doc.querySelector(r):r;if(!e)throw new ct(-5104,!1);return t||(e.textContent=""),e}parentNode(r){return r.parentNode}nextSibling(r){return r.nextSibling}setAttribute(r,t,e,s){if(s){t=s+":"+t;let n=Ae[s];n?r.setAttributeNS(n,t,e):r.setAttribute(t,e)}else r.setAttribute(t,e)}removeAttribute(r,t,e){if(e){let s=Ae[e];s?r.removeAttributeNS(s,t):r.removeAttribute(`${e}:${t}`)}else r.removeAttribute(t)}addClass(r,t){r.classList.add(t)}removeClass(r,t){r.classList.remove(t)}setStyle(r,t,e,s){s&(Ot.DashCase|Ot.Important)?r.style.setProperty(t,e,s&Ot.Important?"important":""):r.style[t]=e}removeStyle(r,t,e){e&Ot.DashCase?r.style.removeProperty(t):r.style[t]=""}setProperty(r,t,e){r!=null&&(r[t]=e)}setValue(r,t){r.nodeValue=t}listen(r,t,e,s){if(typeof r=="string"&&(r=se().getGlobalEventTarget(this.doc,r),!r))throw new Error(`Unsupported event target ${r} for event ${t}`);let n=this.decoratePreventDefault(e);return this.tracingService!==null&&this.tracingService.wrapEventListener&&(n=this.tracingService.wrapEventListener(r,t,n)),this.eventManager.addEventListener(r,t,n,s)}decoratePreventDefault(r){return t=>{if(t==="__ngUnwrap__")return r;(this.platformIsServer?this.ngZone.runGuarded(()=>r(t)):r(t))===!1&&t.preventDefault()}}};function qr(i){return i.tagName==="TEMPLATE"&&i.content!==void 0}var Me=class extends Lt{sharedStylesHost;hostEl;shadowRoot;constructor(r,t,e,s,n,o,a,l,u){super(r,n,o,l,u),this.sharedStylesHost=t,this.hostEl=e,this.shadowRoot=e.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=s.styles;f=Jr(s.id,f);for(let y of f){let E=document.createElement("style");a&&E.setAttribute("nonce",a),E.textContent=y,this.shadowRoot.appendChild(E)}let d=s.getExternalStyles?.();if(d)for(let y of d){let E=Pe(y,n);a&&E.setAttribute("nonce",a),this.shadowRoot.appendChild(E)}}nodeOrShadowRoot(r){return r===this.hostEl?this.shadowRoot:r}appendChild(r,t){return super.appendChild(this.nodeOrShadowRoot(r),t)}insertBefore(r,t,e){return super.insertBefore(this.nodeOrShadowRoot(r),t,e)}removeChild(r,t){return super.removeChild(null,t)}parentNode(r){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(r)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ht=class extends Lt{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(r,t,e,s,n,o,a,l,u){super(r,n,o,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=s;let f=e.styles;this.styles=u?Jr(u,f):f,this.styleUrls=e.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ae=class extends Ht{contentAttr;hostAttr;constructor(r,t,e,s,n,o,a,l,u){let f=s+"-"+e.id;super(r,t,e,n,o,a,l,u,f),this.contentAttr=ki(f),this.hostAttr=Li(f)}applyToHost(r){this.applyStyles(),this.setAttribute(r,this.hostAttr,"")}createElement(r,t){let e=super.createElement(r,t);return super.setAttribute(e,this.contentAttr,""),e}},Hi=(()=>{class i extends oe{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,s,n){return t.addEventListener(e,s,n),()=>this.removeEventListener(t,e,s,n)}removeEventListener(t,e,s,n){return t.removeEventListener(e,s,n)}static \u0275fac=function(e){return new(e||i)(v(U))};static \u0275prov=P({token:i,factory:i.\u0275fac})}return i})(),Qr=["alt","control","meta","shift"],ji={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Bi={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey},Vi=(()=>{class i extends oe{constructor(t){super(t)}supports(t){return i.parseEventName(t)!=null}addEventListener(t,e,s,n){let o=i.parseEventName(e),a=i.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>se().onAndCancel(t,o.domEventName,a,n))}static parseEventName(t){let e=t.toLowerCase().split("."),s=e.shift();if(e.length===0||!(s==="keydown"||s==="keyup"))return null;let n=i._normalizeKey(e.pop()),o="",a=e.indexOf("code");if(a>-1&&(e.splice(a,1),o="code."),Qr.forEach(u=>{let f=e.indexOf(u);f>-1&&(e.splice(f,1),o+=u+".")}),o+=n,e.length!=0||n.length===0)return null;let l={};return l.domEventName=s,l.fullKey=o,l}static matchEventFullKeyCode(t,e){let s=ji[t.key]||t.key,n="";return e.indexOf("code.")>-1&&(s=t.code,n="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Qr.forEach(o=>{if(o!==s){let a=Bi[o];a(t)&&(n+=o+".")}}),n+=s,n===e)}static eventCallback(t,e,s){return n=>{i.matchEventFullKeyCode(n,t)&&s.runGuarded(()=>e(n))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(e){return new(e||i)(v(U))};static \u0275prov=P({token:i,factory:i.\u0275fac})}return i})();function Xs(i,r){return Or(c({rootComponent:i},$i(r)))}function $i(i){return{appProviders:[...ti,...i?.providers??[]],platformProviders:Yi}}function zi(){xe.makeCurrent()}function Ki(){return new ut}function Wi(){return yr(document),document}var Yi=[{provide:ee,useValue:Vr},{provide:vr,useValue:zi,multi:!0},{provide:U,useFactory:Wi,deps:[]}];var qi=[{provide:re,useClass:Ce,deps:[]},{provide:Pr,useClass:ie,deps:[wt,Ie,re]},{provide:ie,useClass:ie,deps:[wt,Ie,re]}],ti=[{provide:pr,useValue:"root"},{provide:ut,useFactory:Ki,deps:[]},{provide:Te,useClass:Hi,multi:!0,deps:[U]},{provide:Te,useClass:Vi,multi:!0,deps:[U]},Yr,Xr,Gr,{provide:Cr,useExisting:Yr},{provide:$r,useClass:Di,deps:[]},[]],Zs=(()=>{class i{constructor(){}static \u0275fac=function(e){return new(e||i)};static \u0275mod=_e({type:i});static \u0275inj=ve({providers:[...ti,...qi],imports:[Br,Ur]})}return i})();var Js=(()=>{class i{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(e){return new(e||i)(v(U))};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Ne=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275prov=P({token:i,factory:function(e){let s=null;return e?s=new(e||i):s=v(Qi),s},providedIn:"root"})}return i})(),Qi=(()=>{class i extends Ne{_doc;constructor(t){super(),this._doc=t}sanitize(t,e){if(e==null)return null;switch(t){case F.NONE:return e;case F.HTML:return Ct(e,"HTML")?xt(e):xr(this._doc,String(e)).toString();case F.STYLE:return Ct(e,"Style")?xt(e):e;case F.SCRIPT:if(Ct(e,"Script"))return xt(e);throw new ct(5200,!1);case F.URL:return Ct(e,"URL")?xt(e):wr(String(e));case F.RESOURCE_URL:if(Ct(e,"ResourceURL"))return xt(e);throw new ct(5201,!1);default:throw new ct(5202,!1)}}bypassSecurityTrustHtml(t){return Sr(t)}bypassSecurityTrustStyle(t){return _r(t)}bypassSecurityTrustScript(t){return Ir(t)}bypassSecurityTrustUrl(t){return br(t)}bypassSecurityTrustResourceUrl(t){return Ar(t)}static \u0275fac=function(e){return new(e||i)(v(U))};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var lt={type:null,entityIds:null,skip:!1,payload:null},Fe=!1;function Ue(){Fe=!1}function O(i,r,t){A(i,r,t),Fe=!0}function A(i,r,t){Fe===!1&&(lt.type=i,lt.entityIds=r,lt.payload=t)}function Oe(i=!0){lt.skip=i}function ke(i,r){return function(t,e,s){let n=s.value;return s.value=function(...o){return O(i,r),n.apply(this,o)},s}}function C(i){return i==null}function et(i){return C(i)===!1}var jt=new q,ft=new Xt(50,5e3),Le=new q;function ei(i){jt.next(i)}function ri(i){ft.next(i)}function ii(i,r){Le.next({storeName:i,action:r})}var ht=typeof window<"u",Bt=!ht,He=()=>{try{return typeof localStorage<"u"}catch{return!1}},si=()=>{try{return typeof sessionStorage<"u"}catch{return!1}};var _={},je={};ht&&(window.$$stores=_,window.$$queries=je);function Be(i){return i&&i.charAt(0).toUpperCase()+i.slice(1)}var Tt=[];function Xi(i,r={}){if(Bt||!window.__REDUX_DEVTOOLS_EXTENSION__)return;Tt.length&&Tt.forEach(u=>{u.unsubscribe?u.unsubscribe():u&&u()}),i&&i.run||(i=i||{},i.run=u=>u(),r=i);let s=Object.assign({},{name:"Akita",shallow:!0,storesWhitelist:[]},r),n=s.storesWhitelist,o=window.__REDUX_DEVTOOLS_EXTENSION__.connect(s),a={},l=u=>n.length?n.indexOf(u)>-1:!0;Tt.push(ft.subscribe(u=>{l(u)!==!1&&(a=p(c({},a),{[u]:_[u]._value()}),o.send({type:`[${Be(u)}] - @@INIT`},a))})),Tt.push(jt.subscribe(u=>{l(u)!==!1&&(delete a[u],o.send({type:`[${u}] - Delete Store`},a))})),Tt.push(Le.subscribe(({storeName:u,action:f})=>{if(l(u)===!1)return;let Rt=f,{type:d,entityIds:y,skip:E}=Rt,M=Gt(Rt,["type","entityIds","skip"]).payload;if(E){Oe(!1);return}let k=_[u];if(!k||r.shallow===!1&&a[u]&&JSON.stringify(k._value())===JSON.stringify(a[u]))return;a=p(c({},a),{[u]:k._value()});let H=Be(u),D=et(y)?`[${H}] - ${d} (ids: ${y})`:`[${H}] - ${d}`;if(r.logTrace&&(console.group(D),console.trace(),console.groupEnd()),r.sortAlphabetically){let vt=Object.keys(a).sort().reduce((Et,Nt)=>(Et[Nt]=a[Nt],Et),{});o.send(c({type:D},M),vt);return}o.send(c({type:D},M),a)})),Tt.push(o.subscribe(u=>{if(u.type==="DISPATCH"){if(u.payload.type==="COMMIT"){o.init(a);return}if(u.state){let d=JSON.parse(u.state);for(let y=0,E=Object.keys(d);y<E.length;y++){let x=E[y];_[x]&&i.run(()=>{_[x]._setState(()=>d[x],!1)})}}}}))}var Vt=!0;function Zi(){Vt=!1,ht&&(delete window.$$stores,delete window.$$queries)}function I(){return Vt}function dt(i,r){return r.split(".").length===1?i:r.split(".").slice(1).join(".").split(".").reduce((e,s)=>e&&e[s],i)}function m(i){return typeof i=="function"}function $(i){let r=typeof i;return i!=null&&(r=="object"||r=="function")}function Pt(i,r,t,e=!1){let s=r.split(".");if(s.length===1)return c(c({},i),t);i=c({},i);let n=s.length-2;return r.split(".").slice(1).reduce((a,l,u)=>u!==n?(a[l]=c({},a[l]),a&&a[l]):(a[l]=e||Array.isArray(a[l])||!$(a[l])?t:c(c({},a[l]),t),a&&a[l]),i),i}var ni=!1,Ji=new Xt(1);function Ve(i){ni=i}function ts(){return ni}function es(i){return i&&m(i.then)}function $t(i){return es(i)||Jt(i)?Zt(i):V(i)}function rs(i){let r={key:"AkitaStores",enableInNonBrowser:!1,storage:He()?localStorage:i.storage,deserialize:JSON.parse,serialize:JSON.stringify,include:[],select:[],persistOnDestroy:!1,preStorageUpdate:function(S,g){return g},preStoreUpdate:function(S,g){return g},skipStorageUpdate:ts,preStorageUpdateOperator:()=>S=>S},{storage:t,enableInNonBrowser:e,deserialize:s,serialize:n,include:o,select:a,key:l,preStorageUpdate:u,persistOnDestroy:f,preStorageUpdateOperator:d,preStoreUpdate:y,skipStorageUpdate:E}=Object.assign({},r,i);if(Bt&&!e||!t)return;let x=o.length>0,M=a.length>0,k,H;x&&(k=o.reduce((S,g)=>{if(m(g))S.fns.push(g);else{let Y=g.split(".")[0];S[Y]=g}return S},{fns:[]})),M&&(H=a.reduce((S,g)=>(S[g.storeName]=g,S),{}));let D={},Rt={},vt=[],Et=[];function Nt(S){$t(S).subscribe(()=>{let g=Et.shift();g&&Nt(g)})}let xi=He()&&t===localStorage||si()&&t===sessionStorage;return $t(t.getItem(l)).subscribe(S=>{let g=$(S)?S:s(S||"{}");function Y(h){g.$cache=c(c({},g.$cache||{}),h),g=Object.assign({},g,Rt),Et.push(t.setItem(l,xi?n(g):g)),Nt(Et.shift())}function St(h,_t){D[h]=_[h]._select(N=>dt(N,_t)).pipe(hr(1),R(N=>M&&H[h]?H[h](N):N),It(()=>E()===!1),d()).subscribe(N=>{Rt[h]=u(h,N),Promise.resolve().then(()=>Y({[h]:_[h]._cache().getValue()}))})}function ye(h,_t,N){if(h in g){A("@PersistState"),_t._setState(Qt=>Pt(Qt,N,y(h,g[h],Qt)));let ir=g.$cache?g.$cache[h]:!1;_[h].setHasCache(ir,{restartTTL:!0})}}vt.push(jt.subscribe(h=>{D[h]&&(f===!1&&Y({[h]:!1}),D[h].unsubscribe(),delete D[h])})),vt.push(ft.subscribe(h=>{if(h==="router")return;let _t=_[h];if(x){let N=k[h];if(!N)if(k.fns.some(Qt=>Qt(h)))N=h;else return;ye(h,_t,N),St(h,N)}else ye(h,_t,h),St(h,h)})),Ji.next(!0)}),{destroy(){vt.forEach(S=>S.unsubscribe());for(let S=0,g=Object.keys(D);S<g.length;S++){let Y=g[S];D[Y].unsubscribe()}D={}},clear(){t.clear()},clearStore(S){if(C(S)){$t(t.setItem(l,"{}")).subscribe();return}let g=t.getItem(l);$t(g).subscribe(Y=>{let St=s(Y||"{}");St[S]&&(delete St[S],$t(t.setItem(l,n(St))).subscribe())})}}}function z(i,r){return i.hasOwnProperty(r)}function L(i){return Array.isArray(i)}function zt(i){return i.hasOwnProperty("active")}function ce(i){return L(i)}function Kt({active:i,ids:r,entities:t}){return ce(i)?oi(i,r):z(t,i)===!1?null:i}function oi(i,r){let t=i.filter(e=>r.indexOf(e)>-1);return t.length===i.length?i:t}function $e({state:i,entities:r,idKey:t,options:e={},preAddEntity:s}){let n={},o=[],a=!1;for(let l of r)if(z(i.entities,l[t])===!1){let u=s(l),f=u[t];n[f]=u,e.prepend?o.unshift(f):o.push(f),a=!0}return a?{newState:p(c({},i),{entities:c(c({},i.entities),n),ids:e.prepend?[...o,...i.ids]:[...i.ids,...o]}),newIds:o}:null}function b(i){return C(i)?[]:Array.isArray(i)?i:[i]}var rt="id";function K(i){return L(i)?i.length===0:!1}var ai={resettable:!1,ttl:null,producerFn:void 0};function Mt(){return ai}function ci(){return ai.producerFn}var it=function(i){return i.Set="Set",i.Add="Add",i.Update="Update",i.Remove="Remove",i}(it||{});function ze(i,r,t){let e;if(L(i))e=i;else if($(i)){if(C(t))return;i=Object.assign({wrap:!0},i);let s=r.indexOf(t);if(i.prev){let n=s===0;if(n&&!i.wrap)return;e=n?r[r.length-1]:r[s-1]}else if(i.next){let n=r.length===s+1;if(n&&!i.wrap)return;e=n?r[0]:r[s+1]}}else{if(i===t)return;e=i}return e}var Ke=()=>({entities:{},ids:[],loading:!0,error:null});function B(i){return i===void 0}function We({state:i,ids:r}){if(C(r))return ui(i);let t=i.entities,e={};for(let n of i.ids)r.includes(n)===!1&&(e[n]=t[n]);let s=p(c({},i),{entities:e,ids:i.ids.filter(n=>r.includes(n)===!1)});return zt(i)&&(s.active=Kt(s)),s}function ui(i){return p(c({},i),{entities:{},ids:[],active:ce(i.active)?[]:null})}function Ye(i,r,t){let e={entities:{},ids:[]};for(let s of i){let n=t(s);e.entities[n[r]]=n,e.ids.push(n[r])}return e}function fi(i){return i.entities&&i.ids}function li(i,r){let t={};for(let e of Object.keys(i))t[e]=r(i[e]);return t}function qe({state:i,entities:r,idKey:t,preAddEntity:e,isNativePreAdd:s}){let n,o;if(L(r)){let l=Ye(r,t,e);n=l.entities,o=l.ids}else fi(r)?(n=s?r.entities:li(r.entities,e),o=r.ids):(n=s?r:li(r,e),o=Object.keys(n).map(l=>isNaN(l)?l:Number(l)));let a=p(c({},i),{entities:n,ids:o,loading:!1});return zt(i)&&(a.active=Kt(a)),a}function Qe(i){Object.freeze(i);let r=typeof i=="function",t=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(i).forEach(function(e){t.call(i,e)&&(!r||e!=="caller"&&e!=="callee"&&e!=="arguments")&&i[e]!==null&&(typeof i[e]=="object"||typeof i[e]=="function")&&!Object.isFrozen(i[e])&&Qe(i[e])}),i}function hi(i,r){i||console.error(`@StoreConfig({ name }) is missing in ${r}`)}function G(i){return i!=null&&`${i}`!="false"}function Dt(i){return G(i)&&i.constructor.name==="Object"}var pt="akitaConfig";function Ge(i){return function(r){r[pt]={idKey:"id"};for(let t=0,e=Object.keys(i);t<e.length;t++){let s=e[t];s==="name"?r[pt].storeName=i[s]:r[pt][s]=i[s]}}}var os=new q,di=new ot(!1),X={activeTransactions:0,batchTransaction:null};function pi(){ue()||(X.batchTransaction=new q),X.activeTransactions++,di.next(!0)}function mi(){--X.activeTransactions===0&&(X.batchTransaction.next(!0),X.batchTransaction.complete(),di.next(!1),os.next(!0))}function ue(){return X.activeTransactions>0}function Xe(){return X.batchTransaction?X.batchTransaction.asObservable():V(!0)}function Wt(i,r=void 0){pi();try{return i.apply(r)}finally{O("@Transaction"),mi()}}function le(){return function(i,r,t){let e=t.value;return t.value=function(...s){return Wt(()=>e.apply(this,s),this)},t}}var st=class{constructor(r,t={}){this.options=t,this.inTransaction=!1,this.cache={active:new ot(!1),ttl:null},this.onInit(r)}setLoading(r=!1){r!==this._value().loading&&(I()&&A("Set Loading"),this._setState(t=>p(c({},t),{loading:r})))}setHasCache(r,t={restartTTL:!1}){if(r!==this.cache.active.value&&this.cache.active.next(r),t.restartTTL){let e=this.getCacheTTL();e&&(this.cache.ttl!==null&&clearTimeout(this.cache.ttl),this.cache.ttl=setTimeout(()=>this.setHasCache(!1),e))}}getValue(){return this.storeValue}setError(r){r!==this._value().error&&(I()&&A("Set Error"),this._setState(t=>p(c({},t),{error:r})))}_select(r){return this.store.asObservable().pipe(R(t=>r(t.state)),te())}_value(){return this.storeValue}_cache(){return this.cache.active}get config(){return this.constructor[pt]||{}}get storeName(){return this.config.storeName||this.options.storeName||this.options.name}get deepFreeze(){return this.config.deepFreezeFn||this.options.deepFreezeFn||Qe}get cacheConfig(){return this.config.cache||this.options.cache}get _producerFn(){return this.config.producerFn||this.options.producerFn||ci()}get resettable(){return et(this.config.resettable)?this.config.resettable:this.options.resettable}_setState(r,t=!0){if(m(r)){let e=r(this._value());this.storeValue=Vt?this.deepFreeze(e):e}else this.storeValue=r;if(!this.store){this.store=new ot({state:this.storeValue}),I()&&this.store.subscribe(({action:e})=>{e&&ii(this.storeName,e)});return}if(ue()){this.handleTransaction();return}this.dispatch(this.storeValue,t)}reset(){this.isResettable()&&(I()&&A("Reset"),this._setState(()=>Object.assign({},this._initialState)),this.setHasCache(!1))}update(r){I()&&A("Update");let t,e=this._value();m(r)?t=m(this._producerFn)?this._producerFn(e,r):r(e):t=r;let s=this.akitaPreUpdate(e,c(c({},e),t)),n=Dt(e)?s:new e.constructor(s);this._setState(n)}updateStoreConfig(r){this.options=c(c({},this.options),r)}akitaPreUpdate(r,t){return t}destroy(){!(ht?window.hmrEnabled:!1)&&this===_[this.storeName]&&(delete _[this.storeName],ei(this.storeName),this.setHasCache(!1),this.cache.active.complete(),this.store.complete())}onInit(r){_[this.storeName]=this,this._setState(()=>r),ri(this.storeName),this.isResettable()&&(this._initialState=r),I()&&hi(this.storeName,this.constructor.name)}dispatch(r,t=!0){let e;t&&(e=lt,Ue()),this.store.next({state:r,action:e})}watchTransaction(){Xe().subscribe(()=>{this.inTransaction=!1,this.dispatch(this._value())})}isResettable(){return this.resettable===!1?!1:this.resettable||Mt().resettable}handleTransaction(){this.inTransaction||(this.watchTransaction(),this.inTransaction=!0)}getCacheTTL(){return this.cacheConfig&&this.cacheConfig.ttl||Mt().ttl}};function Ze({state:i,ids:r,idKey:t,newStateOrFn:e,preUpdateEntity:s,producerFn:n,onEntityIdChanges:o}){let a={},l=!1,u;for(let E of r){if(z(i.entities,E)===!1)continue;let x=i.entities[E],M;m(e)?M=m(n)?n(x,e):e(x):M=e;let k=M.hasOwnProperty(t)&&M[t]!==x[t],H;u=E,k&&(l=!0,u=M[t]);let D=c(c({},x),M);Dt(x)?H=D:Dt(M)?H=new x.constructor(D):H=new M.constructor(D),a[u]=s(x,H)}let f=i.ids,d=i.entities;if(l){let[E]=r,y=i.entities,{[E]:x}=y;d=Gt(y,[sr(E)]),f=i.ids.map(k=>k===E?u:k),o(E,u)}return p(c({},i),{entities:c(c({},d),a),ids:f})}var gi,mt=class i extends st{constructor(r={},t={}){super(c(c({},Ke()),r),t),this.options=t,this.entityActions=new q,this.entityIdChanges=new q}get selectEntityAction$(){return this.entityActions.asObservable()}get selectEntityIdChanges$(){return this.entityIdChanges.asObservable()}get idKey(){return this.config.idKey||this.options.idKey||rt}set(r,t={}){if(C(r))return;I()&&A("Set Entity");let e=this.akitaPreAddEntity===i.prototype.akitaPreAddEntity;this.setHasCache(!0,{restartTTL:!0}),this._setState(s=>{let n=qe({state:s,entities:r,idKey:this.idKey,preAddEntity:this.akitaPreAddEntity.bind(this),isNativePreAdd:e});return B(t.activeId)===!1&&(n.active=t.activeId),n}),this.hasInitialUIState()&&this.handleUICreation(),this.entityActions.next({type:it.Set,ids:this.ids})}add(r,t={loading:!1}){let e=b(r);if(K(e))return;let s=$e({state:this._value(),preAddEntity:this.akitaPreAddEntity.bind(this),entities:e,idKey:this.idKey,options:t});s&&(I()&&A("Add Entity"),s.newState.loading=t.loading,this._setState(()=>s.newState),this.hasInitialUIState()&&this.handleUICreation(!0),this.entityActions.next({type:it.Add,ids:s.newIds}))}update(r,t){if(B(t)){super.update(r);return}let e=[];if(m(r)?e=this.ids.filter(n=>r(this.entities[n])):e=C(r)?this.ids:b(r),K(e))return;I()&&A("Update Entity",e);let s;this._setState(n=>Ze({idKey:this.idKey,ids:e,preUpdateEntity:this.akitaPreUpdateEntity.bind(this),state:n,newStateOrFn:t,producerFn:this._producerFn,onEntityIdChanges:(o,a)=>{s={oldId:o,newId:a},this.entityIdChanges.next(p(c({},s),{pending:!0}))}})),s&&this.entityIdChanges.next(p(c({},s),{pending:!1})),this.entityActions.next({type:it.Update,ids:e})}upsert(r,t,e,s={}){let n=b(r),o=d=>y=>z(this.entities,y)===d,a=m(e)?s.baseClass:e?e.baseClass:void 0,l=m(a),u=n.filter(o(!0)),f=n.filter(o(!1)).map(d=>{let y=typeof t=="function"?t({}):t,E=m(e)?e(d,y):y,x=p(c({},E),{[this.idKey]:d});return l?new a(x):x});this.update(u,t),this.add(f),I()&&O("Upsert Entity")}upsertMany(r,t={}){let e=[],s=[],n={};for(let o of r){let a=this.akitaPreCheckEntity(o),l=a[this.idKey];if(z(this.entities,l)){let u=this._value().entities[l],f=c(c({},this._value().entities[l]),a),d=t.baseClass?new t.baseClass(f):f,y=this.akitaPreUpdateEntity(u,d),E=y[this.idKey];n[E]=y,s.push(E)}else{let u=t.baseClass?new t.baseClass(a):a,f=this.akitaPreAddEntity(u),d=f[this.idKey];e.push(d),n[d]=f}}I()&&O("Upsert Many"),this._setState(o=>p(c({},o),{ids:e.length?[...o.ids,...e]:o.ids,entities:c(c({},o.entities),n),loading:!!t.loading})),s.length&&this.entityActions.next({type:it.Update,ids:s}),e.length&&this.entityActions.next({type:it.Add,ids:e}),e.length&&this.hasUIStore()&&this.handleUICreation(!0)}replace(r,t){let e=b(r);if(K(e))return;let s={};for(let n of e)s[n]=p(c({},t),{[this.idKey]:n});I()&&A("Replace Entity",r),this._setState(n=>p(c({},n),{entities:c(c({},n.entities),s)}))}move(r,t){let e=this.ids.slice();e.splice(t<0?e.length+t:t,0,e.splice(r,1)[0]),I()&&A("Move Entity"),this._setState(s=>p(c({},s),{entities:c({},s.entities),ids:e}))}remove(r){if(K(this.ids))return;let t=et(r),e=[];m(r)?e=this.ids.filter(s=>r(this.entities[s])):e=t?b(r):this.ids,!K(e)&&(I()&&A("Remove Entity",e),this._setState(s=>We({state:s,ids:e})),t||this.setHasCache(!1),this.handleUIRemove(e),this.entityActions.next({type:it.Remove,ids:e}))}updateActive(r){let t=b(this.active);I()&&A("Update Active",t),this.update(t,r)}setActive(r){let t=ze(r,this.ids,this.active);t!==void 0&&(I()&&A("Set Active",t),this._setActive(t))}addActive(r){let t=b(r);K(t)||t.every(s=>this.active.indexOf(s)>-1)||(I()&&A("Add Active",r),this._setState(s=>{let n=Array.from(new Set([...s.active,...t]));return p(c({},s),{active:n})}))}removeActive(r){let t=b(r);K(t)||!t.some(s=>this.active.indexOf(s)>-1)||(I()&&A("Remove Active",r),this._setState(s=>p(c({},s),{active:Array.isArray(s.active)?s.active.filter(n=>t.indexOf(n)===-1):null})))}toggleActive(r){let t=b(r),e=o=>a=>this.active.includes(a)===o,s=t.filter(e(!0)),n=t.filter(e(!1));this.removeActive(s),this.addActive(n),I()&&O("Toggle Active")}createUIStore(r={},t={}){let e={name:`UI/${this.storeName}`,idKey:this.idKey};return this.ui=new Yt(r,c(c({},e),t)),this.ui}destroy(){super.destroy(),this.ui instanceof i&&this.ui.destroy(),this.entityActions.complete()}akitaPreUpdateEntity(r,t){return t}akitaPreAddEntity(r){return r}akitaPreCheckEntity(r){return r}get ids(){return this._value().ids}get entities(){return this._value().entities}get active(){return this._value().active}_setActive(r){this._setState(t=>p(c({},t),{active:r}))}handleUICreation(r=!1){let t=this.ids,e=m(this.ui._akitaCreateEntityFn),s,n=o=>{let a=this.entities[o],l=e?this.ui._akitaCreateEntityFn(a):this.ui._akitaCreateEntityFn;return c({[this.idKey]:a[this.idKey]},l)};r?s=this.ids.filter(o=>B(this.ui.entities[o])).map(n):s=t.map(n),r?this.ui.add(s):this.ui.set(s)}hasInitialUIState(){return this.hasUIStore()&&B(this.ui._akitaCreateEntityFn)===!1}handleUIRemove(r){this.hasUIStore()&&this.ui.remove(r)}hasUIStore(){return this.ui instanceof Yt}};at([le(),j("design:type",Function),j("design:paramtypes",[Object,Object,Object,Object]),j("design:returntype",void 0)],mt.prototype,"upsert",null);at([le(),j("design:type",Function),j("design:paramtypes",[typeof(gi=typeof T<"u"&&T)=="function"?gi:Object]),j("design:returntype",void 0)],mt.prototype,"toggleActive",null);var Yt=class extends mt{constructor(r={},t={}){super(r,t)}setInitialEntityState(r){this._akitaCreateEntityFn=r}};function Je(){return It(i=>i!=null)}function yi(i){return function(r,t){let e=m(i[0]);return i.some(s=>e?s(r)!==s(t):r[s]!==t[s])===!1}}function gt(i){return typeof i=="string"}var tr="akitaQueryConfig";var yt=class{constructor(r){this.store=r,this.__store__=r,I()&&(je[r.storeName]=this)}select(r){let t;if(m(r))t=r;else if(gt(r))t=e=>e[r];else{if(Array.isArray(r))return this.store._select(e=>e).pipe(te(yi(r)),R(e=>m(r[0])?r.map(s=>s(e)):r.reduce((s,n)=>(s[n]=e[n],s),{})));t=e=>e}return this.store._select(t)}selectLoading(){return this.select(r=>r.loading)}selectError(){return this.select(r=>r.error)}getValue(){return this.store._value()}selectHasCache(){return this.store._cache().asObservable()}getHasCache(){return this.store._cache().value}get config(){return this.constructor[tr]}};var nt=class{constructor(r,t){this.query=r,t&&t.resetFn&&Mt().resettable&&this.onReset(t.resetFn)}getQuery(){return this.query}getStore(){return this.getQuery().__store__}isEntityBased(r){return G(r)}selectSource(r,t){return this.isEntityBased(r)?this.getQuery().selectEntity(r).pipe(Je()):t?this.getQuery().select(e=>dt(e,this.withStoreName(t))):this.getQuery().select()}getSource(r,t){if(this.isEntityBased(r))return this.getQuery().getEntity(r);let e=this.getQuery().getValue();return t?dt(e,this.withStoreName(t)):e}withStoreName(r){return`${this.storeName}.${r}`}get storeName(){return this.getStore().storeName}updateStore(r,t,e,s=!1){if(this.isEntityBased(t)){let n=this.getStore();s?n.replace(t,r):n.update(t,r)}else{if(e){this.getStore()._setState(o=>Pt(o,this.withStoreName(e),r,!0));return}let n=s?r:o=>c(c({},o),r);this.getStore()._setState(n)}}onReset(r){let t=this.getStore().reset;this.getStore().reset=(...e)=>{setTimeout(()=>{t.apply(this.getStore(),e),r()})}}};var ps={pagesControls:!1,range:!1,startWith:1,cacheTimeout:void 0,clearStoreWithCache:!0},fe=class extends nt{constructor(r,t={}){super(r,{resetFn:()=>{this.initial=!1,this.destroy({clearCache:!0,currentPage:1})}}),this.query=r,this.config=t,this.metadata=new Map,this.pages=new Map,this.pagination={currentPage:1,perPage:0,total:0,lastPage:0,data:[]},this.initial=!0,this.isLoading$=this.query.selectLoading().pipe(ur(0)),this.config=c(c({},ps),t);let{startWith:e,cacheTimeout:s}=this.config;this.page=new ot(e),Jt(s)&&(this.clearCacheSubscription=s.subscribe(()=>this.clearCache()))}get pageChanges(){return this.page.asObservable()}get currentPage(){return this.pagination.currentPage}get isFirst(){return this.currentPage===1}get isLast(){return this.currentPage===this.pagination.lastPage}withControls(){return this.config.pagesControls=!0,this}withRange(){return this.config.range=!0,this}setLoading(r=!0){this.getStore().setLoading(r)}update(r){this.pagination=r,this.addPage(r.data)}addPage(r){this.pages.set(this.currentPage,{ids:r.map(t=>t[this.getStore().idKey])}),this.getStore().upsertMany(r)}clearCache(r={}){this.initial||(O("@Pagination - Clear Cache"),r.clearStore!==!1&&(this.config.clearStoreWithCache||r.clearStore)&&this.getStore().remove(),this.pages=new Map,this.metadata=new Map),this.initial=!1}clearPage(r){this.pages.delete(r)}destroy({clearCache:r,currentPage:t}={}){this.clearCacheSubscription&&this.clearCacheSubscription.unsubscribe(),r&&this.clearCache(),B(t)||this.setPage(t),this.initial=!0}isPageActive(r){return this.currentPage===r}setPage(r){(r!==this.currentPage||!this.hasPage(r))&&this.page.next(this.pagination.currentPage=r)}nextPage(){this.currentPage!==this.pagination.lastPage&&this.setPage(this.pagination.currentPage+1)}prevPage(){this.pagination.currentPage>1&&this.setPage(this.pagination.currentPage-1)}setLastPage(){this.setPage(this.pagination.lastPage)}setFirstPage(){this.setPage(1)}hasPage(r){return this.pages.has(r)}getPage(r){let t=this.pagination.currentPage;return this.hasPage(t)?this.selectPage(t):(this.setLoading(!0),Zt(r()).pipe(dr(e=>(t=e.currentPage,Wt(()=>{this.setLoading(!1),this.update(e)}),this.selectPage(t)))))}getQuery(){return this.query}refreshCurrentPage(){C(this.currentPage)===!1&&(this.clearPage(this.currentPage),this.setPage(this.currentPage))}getFrom(){return this.isFirst?1:(this.currentPage-1)*this.pagination.perPage+1}getTo(){return this.isLast?this.pagination.total:this.currentPage*this.pagination.perPage}selectPage(r){return this.query.selectAll({asObject:!0}).pipe(bt(1),R(t=>{let e=p(c({},this.pagination),{data:this.pages.get(r).ids.map(o=>t[o])}),{range:s,pagesControls:n}=this.config;return isNaN(this.pagination.total)&&(e.lastPage===1?e.total=e.data?e.data.length:0:e.total=e.perPage*e.lastPage,this.pagination.total=e.total),s&&(e.from=this.getFrom(),e.to=this.getTo()),n&&(e.pageControls=ms(this.pagination.total,this.pagination.perPage)),e}))}};at([ke("@Pagination - New Page"),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",void 0)],fe.prototype,"update",null);function ms(i,r){let t=Math.ceil(i/r),e=[];for(let s=0;s<t;s++)e.push(s+1);return e}var er=function(i){return i.Update="UPDATE",i}(er||{}),Zu={[er.Update]:"update"},Z=function(i){return i.Update="UPDATE",i.AddEntities="ADD_ENTITIES",i.SetEntities="SET_ENTITIES",i.UpdateEntities="UPDATE_ENTITIES",i.RemoveEntities="REMOVE_ENTITIES",i.UpsertEntities="UPSERT_ENTITIES",i.UpsertManyEntities="UPSERT_MANY_ENTITIES",i}(Z||{}),Ju={[Z.Update]:"update",[Z.AddEntities]:"add",[Z.SetEntities]:"set",[Z.UpdateEntities]:"update",[Z.RemoveEntities]:"remove",[Z.UpsertEntities]:"upsert",[Z.UpsertManyEntities]:"upsertMany"};var he=class{getStoresSnapshot(r=[]){let t={},s=r.length>0?r:Object.keys(_);for(let n=0;n<s.length;n++){let o=s[n];o!=="router"&&(t[o]=_[o]._value())}return t}setStoresSnapshot(r,t){let e=c({skipStorageUpdate:!1,lazy:!1},t);e.skipStorageUpdate&&Ve(!0);let s=r;gt(r)&&(s=JSON.parse(s));let n=Object.keys(s).length;if(e.lazy)ft.pipe(It(o=>s.hasOwnProperty(o)),bt(n)).subscribe(o=>_[o]._setState(()=>s[o]));else for(let o=0,a=Object.keys(s);o<a.length;o++){let l=a[o];_[l]&&_[l]._setState(()=>s[l])}e.skipStorageUpdate&&Ve(!1)}},ys=new he;var vs=["*"],de;function Es(){if(de===void 0&&(de=null,typeof window<"u")){let i=window;i.trustedTypes!==void 0&&(de=i.trustedTypes.createPolicy("angular#components",{createHTML:r=>r}))}return de}function qt(i){return Es()?.createHTML(i)||i}function Si(i){return Error(`Unable to find icon with the name "${i}"`)}function Ss(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function _i(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function Ii(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}var J=class{url;svgText;options;svgElement;constructor(r,t,e){this.url=r,this.svgText=t,this.options=e}},_s=(()=>{class i{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(t,e,s,n){this._httpClient=t,this._sanitizer=e,this._errorHandler=n,this._document=s}addSvgIcon(t,e,s){return this.addSvgIconInNamespace("",t,e,s)}addSvgIconLiteral(t,e,s){return this.addSvgIconLiteralInNamespace("",t,e,s)}addSvgIconInNamespace(t,e,s,n){return this._addSvgIconConfig(t,e,new J(s,null,n))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,e,s,n){let o=this._sanitizer.sanitize(F.HTML,s);if(!o)throw Ii(s);let a=qt(o);return this._addSvgIconConfig(t,e,new J("",a,n))}addSvgIconSet(t,e){return this.addSvgIconSetInNamespace("",t,e)}addSvgIconSetLiteral(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}addSvgIconSetInNamespace(t,e,s){return this._addSvgIconSetConfig(t,new J(e,null,s))}addSvgIconSetLiteralInNamespace(t,e,s){let n=this._sanitizer.sanitize(F.HTML,e);if(!n)throw Ii(e);let o=qt(n);return this._addSvgIconSetConfig(t,new J("",o,s))}registerFontClassAlias(t,e=t){return this._fontCssClassesByAlias.set(t,e),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let e=this._sanitizer.sanitize(F.RESOURCE_URL,t);if(!e)throw _i(t);let s=this._cachedIconsByUrl.get(e);return s?V(pe(s)):this._loadSvgIconFromConfig(new J(t,null)).pipe(Ft(n=>this._cachedIconsByUrl.set(e,n)),R(n=>pe(n)))}getNamedSvgIcon(t,e=""){let s=bi(e,t),n=this._svgIconConfigs.get(s);if(n)return this._getSvgFromConfig(n);if(n=this._getIconConfigFromResolvers(e,t),n)return this._svgIconConfigs.set(s,n),this._getSvgFromConfig(n);let o=this._iconSetConfigs.get(e);return o?this._getSvgFromIconSetConfigs(t,o):or(Si(s))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?V(pe(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(R(e=>pe(e)))}_getSvgFromIconSetConfigs(t,e){let s=this._extractIconWithNameFromAnySet(t,e);if(s)return V(s);let n=e.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(cr(a=>{let u=`Loading icon set URL: ${this._sanitizer.sanitize(F.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(u)),V(null)})));return ar(n).pipe(R(()=>{let o=this._extractIconWithNameFromAnySet(t,e);if(!o)throw Si(t);return o}))}_extractIconWithNameFromAnySet(t,e){for(let s=e.length-1;s>=0;s--){let n=e[s];if(n.svgText&&n.svgText.toString().indexOf(t)>-1){let o=this._svgElementFromConfig(n),a=this._extractSvgIconFromSet(o,t,n.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Ft(e=>t.svgText=e),R(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?V(null):this._fetchIcon(t).pipe(Ft(e=>t.svgText=e))}_extractSvgIconFromSet(t,e,s){let n=t.querySelector(`[id="${e}"]`);if(!n)return null;let o=n.cloneNode(!0);if(o.removeAttribute("id"),o.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(o,s);if(o.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(o),s);let a=this._svgElementFromString(qt("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,s)}_svgElementFromString(t){let e=this._document.createElement("DIV");e.innerHTML=t;let s=e.querySelector("svg");if(!s)throw Error("<svg> tag not found");return s}_toSvgElement(t){let e=this._svgElementFromString(qt("<svg></svg>")),s=t.attributes;for(let n=0;n<s.length;n++){let{name:o,value:a}=s[n];o!=="id"&&e.setAttribute(o,a)}for(let n=0;n<t.childNodes.length;n++)t.childNodes[n].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[n].cloneNode(!0));return e}_setSvgAttributes(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}_fetchIcon(t){let{url:e,options:s}=t,n=s?.withCredentials??!1;if(!this._httpClient)throw Ss();if(e==null)throw Error(`Cannot fetch icon from URL "${e}".`);let o=this._sanitizer.sanitize(F.RESOURCE_URL,e);if(!o)throw _i(e);let a=this._inProgressUrlFetches.get(o);if(a)return a;let l=this._httpClient.get(o,{responseType:"text",withCredentials:n}).pipe(R(u=>qt(u)),lr(()=>this._inProgressUrlFetches.delete(o)),fr());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(t,e,s){return this._svgIconConfigs.set(bi(t,e),s),this}_addSvgIconSetConfig(t,e){let s=this._iconSetConfigs.get(t);return s?s.push(e):this._iconSetConfigs.set(t,[e]),this}_svgElementFromConfig(t){if(!t.svgElement){let e=this._svgElementFromString(t.svgText);this._setSvgAttributes(e,t.options),t.svgElement=e}return t.svgElement}_getIconConfigFromResolvers(t,e){for(let s=0;s<this._resolvers.length;s++){let n=this._resolvers[s](e,t);if(n)return Is(n)?new J(n.url,null,n.options):new J(n,null)}}static \u0275fac=function(e){return new(e||i)(v(zr,8),v(Ne),v(U,8),v(ut))};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function pe(i){return i.cloneNode(!0)}function bi(i,r){return i+":"+r}function Is(i){return!!(i.url&&i.options)}var bs=new At("MAT_ICON_DEFAULT_OPTIONS"),As=new At("mat-icon-location",{providedIn:"root",factory:ws});function ws(){let i=Q(U),r=i?i.location:null;return{getPathname:()=>r?r.pathname+r.search:""}}var Ai=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],xs=Ai.map(i=>`[${i}]`).join(", "),Cs=/^url\(['"]?#(.*?)['"]?\)$/,Rh=(()=>{class i{_elementRef=Q(gr);_iconRegistry=Q(_s);_location=Q(As);_errorHandler=Q(ut);_defaultColor;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(t){let e=this._cleanupFontValue(t);e!==this._fontSet&&(this._fontSet=e,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(t){let e=this._cleanupFontValue(t);e!==this._fontIcon&&(this._fontIcon=e,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=nr.EMPTY;constructor(){let t=Q(new mr("aria-hidden"),{optional:!0}),e=Q(bs,{optional:!0});e&&(e.color&&(this.color=this._defaultColor=e.color),e.fontSet&&(this.fontSet=e.fontSet)),t||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let e=this._location.getPathname();e!==this._previousPath&&(this._previousPath=e,this._prependPathToReferences(e))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let e=this._location.getPathname();this._previousPath=e,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(e),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){let s=t.childNodes[e];(s.nodeType!==1||s.nodeName.toLowerCase()==="svg")&&s.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,e=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(s=>s.length>0);this._previousFontSetClass.forEach(s=>t.classList.remove(s)),e.forEach(s=>t.classList.add(s)),this._previousFontSetClass=e,this.fontIcon!==this._previousFontIconClass&&!e.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let e=this._elementsWithExternalReferences;e&&e.forEach((s,n)=>{s.forEach(o=>{n.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){let e=t.querySelectorAll(xs),s=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let n=0;n<e.length;n++)Ai.forEach(o=>{let a=e[n],l=a.getAttribute(o),u=l?l.match(Cs):null;if(u){let f=s.get(a);f||(f=[],s.set(a,f)),f.push({name:o,value:u[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[e,s]=this._splitIconName(t);e&&(this._svgNamespace=e),s&&(this._svgName=s),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(s,e).pipe(bt(1)).subscribe(n=>this._setSvgElement(n),n=>{let o=`Error retrieving icon ${e}:${s}! ${n.message}`;this._errorHandler.handleError(new Error(o))})}}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Tr({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(e,s){e&2&&(Mr("data-mat-icon-type",s._usingFontIcon()?"font":"svg")("data-mat-icon-name",s._svgName||s.fontIcon)("data-mat-icon-namespace",s._svgNamespace||s.fontSet)("fontIcon",s._usingFontIcon()?s.fontIcon:null),Rr(s.color?"mat-"+s.color:""),Dr("mat-icon-inline",s.inline)("mat-icon-no-color",s.color!=="primary"&&s.color!=="accent"&&s.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",kr],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:vs,decls:1,vars:0,template:function(e,s){e&1&&(Nr(),Fr(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return i})();var W=function(i){return i.ASC="asc",i.DESC="desc",i}(W||{});var w=function(i){return i.MEDIUM="Medium",i.HEIGHT="Height",i.WIDTH="Width",i.UNIT="Unit",i.YEAR="Year",i.IMAGETYPE="Image Type",i.ARTIST="Artist",i.PROJECT="Project",i.DESC_AUTHOR="Description Author",i.DESC_LANG="Description language",i.VERSION="Version",i}(w||{}),rr=function(i){return i.FRONTAL="Frontal view",i.PROGRESS="Work in progress",i.DETAIL="Detail",i}(rr||{}),Ts=function(i){return i.YEAR="year",i.SIZE="size",i.MEDIUM="medium",i}(Ts||{}),Uh=["23","24","25","26","30","34","37","58","59","61","64","66","70","71","72","74","75","77","94","97","112","114","115","118","117","126","136","159","161","163","165"];var wi=class{static getTraitValue(r,t){try{return r.raw.metadata.attributes.find(e=>e.trait_type===t)?.value??""}catch{switch(t){case w.VERSION:return"";case w.MEDIUM:return"Error getting medium";case w.HEIGHT:return"XX";case w.WIDTH:return"XX";case w.UNIT:return"cm";case w.YEAR:return"XXXX";case w.IMAGETYPE:return"Frontal view";default:return"Error getting data"}}}static getYears(r){let t=r?.map(e=>{let o=e.raw.metadata?.attributes?.find(a=>a.trait_type===w.YEAR)?.value;return o!==void 0?Number(o):null}).filter(e=>typeof e=="number"&&!isNaN(e)).sort().reverse();return new Set(t)}static sortByYear(r,t=W.ASC){return[...r].sort((e,s)=>{let n=Number(this.getTraitValue(e,w.YEAR)),o=Number(this.getTraitValue(s,w.YEAR));return t===W.ASC?n-o:o-n})}static sortByMedium(r,t=W.ASC){let e=["oil","watercolor"];return[...r].sort((s,n)=>{let o=this.getTraitValue(s,w.MEDIUM).toLowerCase()||"",a=this.getTraitValue(n,w.MEDIUM).toLowerCase()||"",l=e.findIndex(d=>o.includes(d)),u=e.findIndex(d=>a.includes(d)),f=l!==-1&&u!==-1?l-u:l!==-1?-1:u!==-1?1:0;return t===W.ASC?f:-f})}static sortBySize(r,t=W.ASC){return[...r].sort((e,s)=>{let n=this.getSize(e),o=this.getSize(s),a=n===o?0:n<o?-1:1;return t===W.ASC?a:-a})}static sortByName(r,t=W.ASC){return[...r].sort((e,s)=>{let n=e.name?.toLowerCase()||"",o=s.name?.toLowerCase()||"",a=n===o?0:n<o?-1:1;return t===W.ASC?a:-a})}static getSize(r){let t=parseInt(this.getTraitValue(r,w.HEIGHT)),e=parseInt(this.getTraitValue(r,w.WIDTH));return t+e}static getNftById(r,t){return t.find(({tokenId:e})=>r===e)||null}static getArtByTitle(r,t){return t.filter(({name:e})=>e===r)}static getNftLenghtByYear(r,t){return t.filter(e=>this.getTraitValue(e,w.YEAR)===r).length}static isFrontalView(r,t){let e=this.filterFrontalArtworks(t);return e.length<=1?e[0]?.tokenId===r.tokenId:this.getLatestVersion(e).tokenId===r.tokenId}static filterFrontalArtworks(r){return r.filter(t=>this.getTraitValue(t,w.IMAGETYPE)===rr.FRONTAL)}static getLatestVersion(r){return r.reduce((t,e)=>{let s=parseInt(this.getTraitValue(t,w.VERSION))||0;return(parseInt(this.getTraitValue(e,w.VERSION))||0)>s?e:t})}static getLatestVersionIndex(r){let t=this.getLatestVersion(r);return r.findIndex(e=>e.tokenId===t.tokenId)}static getNftQualityUrl(r){return r?.originalUrl||r?.cachedUrl||r?.thumbnailUrl}static getNftOptimalUrl(r){return r.thumbnailUrl||r?.cachedUrl||r.originalUrl}};function Ps(){return{artPieces:[],lastArtPiecesUpdate:void 0,imageCache:[]}}var ge=class me extends st{constructor(){super(Ps())}static{this.\u0275fac=function(t){return new(t||me)}}static{this.\u0275prov=P({token:me,factory:me.\u0275fac,providedIn:"root"})}};ge=at([Ge({name:"session"})],ge);var $h=(()=>{class i extends yt{constructor(t){super(t),this.store=t,this.getArtPiecesObservable=this.select(({artPieces:e})=>[...e])}get selectArtPieces(){return this.getValue().artPieces}get selectLastArtPiecesUpdate(){return this.getValue().lastArtPiecesUpdate}getThumbnailByTokenId(t){return this.getValue().imageCache.find(e=>e?.tokenId===t)}static{this.\u0275fac=function(e){return new(e||i)(v(ge))}}static{this.\u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();export{Yr as a,Xs as b,Zs as c,Js as d,Xi as e,Zi as f,rs as g,Rh as h,W as i,w as j,rr as k,Ts as l,Uh as m,wi as n,ge as o,$h as p};
