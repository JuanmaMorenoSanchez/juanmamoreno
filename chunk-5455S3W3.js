import{a as Br}from"./chunk-EZOMQRJD.js";import{a as re,b as Nr,c as Ur,d as O,g as kr,k as Lr,l as Hr,n as _e,o as jr}from"./chunk-FD77GF5O.js";import{$ as ge,Ab as Ee,Ac as Fr,B as nr,Bc as Or,Ca as pr,Eb as Cr,F as It,Ga as dr,H as or,Ha as ye,Hb as Tr,I as Jt,Ia as mr,Ib as Pr,J as ar,Ja as Xt,La as ve,Ma as gr,P as cr,Qa as Ft,R as ur,Ra as At,Sa as wt,T as lr,Ta as yr,Ua as vr,Va as Sr,W as Rt,Wa as Er,X as at,Xa as _r,Xb as Mr,Y as J,Ya as Ir,Yb as Dr,Za as br,_ as C,_a as F,a as rr,ba as X,da as v,db as Ot,ea as q,f as W,fb as Ar,g as nt,h as Yt,ha as fr,j as ot,k as H,l as Gt,m as B,n as ir,o as Zt,pb as wr,q as D,qb as Se,ta as hr,w as sr,xb as xr,ya as bt,yb as te,z as _t,za as ct,zb as ee,zc as Rr}from"./chunk-D2Y6Y2E3.js";import{a as c,b as p,c as er,d as Qt}from"./chunk-4X36HX5K.js";var be=class extends Ur{supportsDOMEvents=!0},Ae=class i extends be{static makeCurrent(){Nr(new i)}onAndCancel(r,t,e,s){return r.addEventListener(t,e,s),()=>{r.removeEventListener(t,e,s)}}dispatchEvent(r,t){r.dispatchEvent(t)}remove(r){r.remove()}createElement(r,t){return t=t||this.getDefaultDocument(),t.createElement(r)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(r){return r.nodeType===Node.ELEMENT_NODE}isShadowRoot(r){return r instanceof DocumentFragment}getGlobalEventTarget(r,t){return t==="window"?window:t==="document"?r:t==="body"?r.body:null}getBaseHref(r){let t=wi();return t==null?null:xi(t)}resetBaseElement(){Nt=null}getUserAgent(){return window.navigator.userAgent}getCookie(r){return kr(document.cookie,r)}},Nt=null;function wi(){return Nt=Nt||document.querySelector("base"),Nt?Nt.getAttribute("href"):null}function xi(i){return new URL(i,document.baseURI).pathname}var we=class{addToWindow(r){J.getAngularTestability=(e,s=!0)=>{let n=r.findTestabilityInTree(e,s);if(n==null)throw new at(5103,!1);return n},J.getAllAngularTestabilities=()=>r.getAllTestabilities(),J.getAllAngularRootElements=()=>r.getAllRootElements();let t=e=>{let s=J.getAllAngularTestabilities(),n=s.length,o=function(){n--,n==0&&e()};s.forEach(a=>{a.whenStable(o)})};J.frameworkStabilizers||(J.frameworkStabilizers=[]),J.frameworkStabilizers.push(t)}findTestabilityInTree(r,t,e){if(t==null)return null;let s=r.getTestability(t);return s??(e?re().isShadowRoot(t)?this.findTestabilityInTree(r,t.host,!0):this.findTestabilityInTree(r,t.parentElement,!0):null)}},Ci=(()=>{class i{build(){return new XMLHttpRequest}static \u0275fac=function(e){return new(e||i)};static \u0275prov=C({token:i,factory:i.\u0275fac})}return i})(),xe=new X(""),qr=(()=>{class i{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,e){this._zone=e,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,e,s,n){return this._findPluginFor(e).addEventListener(t,e,s,n)}getZone(){return this._zone}_findPluginFor(t){let e=this._eventNameToPlugin.get(t);if(e)return e;if(e=this._plugins.find(n=>n.supports(t)),!e)throw new at(5101,!1);return this._eventNameToPlugin.set(t,e),e}static \u0275fac=function(e){return new(e||i)(v(xe),v(bt))};static \u0275prov=C({token:i,factory:i.\u0275fac})}return i})(),se=class{_doc;constructor(r){this._doc=r}manager},ie="ng-app-id";function $r(i){for(let r of i)r.remove()}function Vr(i,r){let t=r.createElement("style");return t.textContent=i,t}function Ti(i,r,t,e){let s=i.head?.querySelectorAll(`style[${ie}="${r}"],link[${ie}="${r}"]`);if(s)for(let n of s)n.removeAttribute(ie),n instanceof HTMLLinkElement?e.set(n.href.slice(n.href.lastIndexOf("/")+1),{usage:0,elements:[n]}):n.textContent&&t.set(n.textContent,{usage:0,elements:[n]})}function Ce(i,r){let t=r.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",i),t}var Qr=(()=>{class i{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,e,s,n={}){this.doc=t,this.appId=e,this.nonce=s,this.isServer=_e(n),Ti(t,e,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,e){for(let s of t)this.addUsage(s,this.inline,Vr);e?.forEach(s=>this.addUsage(s,this.external,Ce))}removeStyles(t,e){for(let s of t)this.removeUsage(s,this.inline);e?.forEach(s=>this.removeUsage(s,this.external))}addUsage(t,e,s){let n=e.get(t);n?n.usage++:e.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,s(t,this.doc)))})}removeUsage(t,e){let s=e.get(t);s&&(s.usage--,s.usage<=0&&($r(s.elements),e.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])$r(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[e,{elements:s}]of this.inline)s.push(this.addElement(t,Vr(e,this.doc)));for(let[e,{elements:s}]of this.external)s.push(this.addElement(t,Ce(e,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,e){return this.nonce&&e.setAttribute("nonce",this.nonce),this.isServer&&e.setAttribute(ie,this.appId),t.appendChild(e)}static \u0275fac=function(e){return new(e||i)(v(O),v(ye),v(ve,8),v(Xt))};static \u0275prov=C({token:i,factory:i.\u0275fac})}return i})(),Ie={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Me=/%COMP%/g;var Yr="%COMP%",Pi=`_nghost-${Yr}`,Mi=`_ngcontent-${Yr}`,Di=!0,Ri=new X("",{providedIn:"root",factory:()=>Di});function Fi(i){return Mi.replace(Me,i)}function Oi(i){return Pi.replace(Me,i)}function Gr(i,r){return r.map(t=>t.replace(Me,i))}var zr=(()=>{class i{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,e,s,n,o,a,l,u=null,f=null){this.eventManager=t,this.sharedStylesHost=e,this.appId=s,this.removeStylesOnCompDestroy=n,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=u,this.tracingService=f,this.platformIsServer=_e(a),this.defaultRenderer=new Ut(t,o,l,this.platformIsServer,this.tracingService)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;this.platformIsServer&&e.encapsulation===Ft.ShadowDom&&(e=p(c({},e),{encapsulation:Ft.Emulated}));let s=this.getOrCreateRenderer(t,e);return s instanceof ne?s.applyToHost(t):s instanceof kt&&s.applyStyles(),s}getOrCreateRenderer(t,e){let s=this.rendererByCompId,n=s.get(e.id);if(!n){let o=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer,y=this.tracingService;switch(e.encapsulation){case Ft.Emulated:n=new ne(l,u,e,this.appId,f,o,a,g,y);break;case Ft.ShadowDom:return new Te(l,u,t,e,o,a,this.nonce,g,y);default:n=new kt(l,u,e,f,o,a,g,y);break}s.set(e.id,n)}return n}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(e){return new(e||i)(v(qr),v(Qr),v(ye),v(Ri),v(O),v(Xt),v(bt),v(ve),v(gr,8))};static \u0275prov=C({token:i,factory:i.\u0275fac})}return i})(),Ut=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(r,t,e,s,n){this.eventManager=r,this.doc=t,this.ngZone=e,this.platformIsServer=s,this.tracingService=n}destroy(){}destroyNode=null;createElement(r,t){return t?this.doc.createElementNS(Ie[t]||t,r):this.doc.createElement(r)}createComment(r){return this.doc.createComment(r)}createText(r){return this.doc.createTextNode(r)}appendChild(r,t){(Kr(r)?r.content:r).appendChild(t)}insertBefore(r,t,e){r&&(Kr(r)?r.content:r).insertBefore(t,e)}removeChild(r,t){t.remove()}selectRootElement(r,t){let e=typeof r=="string"?this.doc.querySelector(r):r;if(!e)throw new at(-5104,!1);return t||(e.textContent=""),e}parentNode(r){return r.parentNode}nextSibling(r){return r.nextSibling}setAttribute(r,t,e,s){if(s){t=s+":"+t;let n=Ie[s];n?r.setAttributeNS(n,t,e):r.setAttribute(t,e)}else r.setAttribute(t,e)}removeAttribute(r,t,e){if(e){let s=Ie[e];s?r.removeAttributeNS(s,t):r.removeAttribute(`${e}:${t}`)}else r.removeAttribute(t)}addClass(r,t){r.classList.add(t)}removeClass(r,t){r.classList.remove(t)}setStyle(r,t,e,s){s&(Ot.DashCase|Ot.Important)?r.style.setProperty(t,e,s&Ot.Important?"important":""):r.style[t]=e}removeStyle(r,t,e){e&Ot.DashCase?r.style.removeProperty(t):r.style[t]=""}setProperty(r,t,e){r!=null&&(r[t]=e)}setValue(r,t){r.nodeValue=t}listen(r,t,e,s){if(typeof r=="string"&&(r=re().getGlobalEventTarget(this.doc,r),!r))throw new Error(`Unsupported event target ${r} for event ${t}`);let n=this.decoratePreventDefault(e);return this.tracingService!==null&&this.tracingService.wrapEventListener&&(n=this.tracingService.wrapEventListener(r,t,n)),this.eventManager.addEventListener(r,t,n,s)}decoratePreventDefault(r){return t=>{if(t==="__ngUnwrap__")return r;(this.platformIsServer?this.ngZone.runGuarded(()=>r(t)):r(t))===!1&&t.preventDefault()}}};function Kr(i){return i.tagName==="TEMPLATE"&&i.content!==void 0}var Te=class extends Ut{sharedStylesHost;hostEl;shadowRoot;constructor(r,t,e,s,n,o,a,l,u){super(r,n,o,l,u),this.sharedStylesHost=t,this.hostEl=e,this.shadowRoot=e.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=s.styles;f=Gr(s.id,f);for(let y of f){let S=document.createElement("style");a&&S.setAttribute("nonce",a),S.textContent=y,this.shadowRoot.appendChild(S)}let g=s.getExternalStyles?.();if(g)for(let y of g){let S=Ce(y,n);a&&S.setAttribute("nonce",a),this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(r){return r===this.hostEl?this.shadowRoot:r}appendChild(r,t){return super.appendChild(this.nodeOrShadowRoot(r),t)}insertBefore(r,t,e){return super.insertBefore(this.nodeOrShadowRoot(r),t,e)}removeChild(r,t){return super.removeChild(null,t)}parentNode(r){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(r)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},kt=class extends Ut{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(r,t,e,s,n,o,a,l,u){super(r,n,o,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=s;let f=e.styles;this.styles=u?Gr(u,f):f,this.styleUrls=e.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ne=class extends kt{contentAttr;hostAttr;constructor(r,t,e,s,n,o,a,l,u){let f=s+"-"+e.id;super(r,t,e,n,o,a,l,u,f),this.contentAttr=Fi(f),this.hostAttr=Oi(f)}applyToHost(r){this.applyStyles(),this.setAttribute(r,this.hostAttr,"")}createElement(r,t){let e=super.createElement(r,t);return super.setAttribute(e,this.contentAttr,""),e}},Ni=(()=>{class i extends se{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,s,n){return t.addEventListener(e,s,n),()=>this.removeEventListener(t,e,s,n)}removeEventListener(t,e,s,n){return t.removeEventListener(e,s,n)}static \u0275fac=function(e){return new(e||i)(v(O))};static \u0275prov=C({token:i,factory:i.\u0275fac})}return i})(),Wr=["alt","control","meta","shift"],Ui={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ki={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey},Li=(()=>{class i extends se{constructor(t){super(t)}supports(t){return i.parseEventName(t)!=null}addEventListener(t,e,s,n){let o=i.parseEventName(e),a=i.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>re().onAndCancel(t,o.domEventName,a,n))}static parseEventName(t){let e=t.toLowerCase().split("."),s=e.shift();if(e.length===0||!(s==="keydown"||s==="keyup"))return null;let n=i._normalizeKey(e.pop()),o="",a=e.indexOf("code");if(a>-1&&(e.splice(a,1),o="code."),Wr.forEach(u=>{let f=e.indexOf(u);f>-1&&(e.splice(f,1),o+=u+".")}),o+=n,e.length!=0||n.length===0)return null;let l={};return l.domEventName=s,l.fullKey=o,l}static matchEventFullKeyCode(t,e){let s=Ui[t.key]||t.key,n="";return e.indexOf("code.")>-1&&(s=t.code,n="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Wr.forEach(o=>{if(o!==s){let a=ki[o];a(t)&&(n+=o+".")}}),n+=s,n===e)}static eventCallback(t,e,s){return n=>{i.matchEventFullKeyCode(n,t)&&s.runGuarded(()=>e(n))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(e){return new(e||i)(v(O))};static \u0275prov=C({token:i,factory:i.\u0275fac})}return i})();function Ys(i,r){return Fr(c({rootComponent:i},Hi(r)))}function Hi(i){return{appProviders:[...Zr,...i?.providers??[]],platformProviders:Vi}}function ji(){Ae.makeCurrent()}function Bi(){return new ct}function $i(){return dr(document),document}var Vi=[{provide:Xt,useValue:Hr},{provide:mr,useValue:ji,multi:!0},{provide:O,useFactory:$i,deps:[]}];var zi=[{provide:te,useClass:we,deps:[]},{provide:xr,useClass:ee,deps:[bt,Ee,te]},{provide:ee,useClass:ee,deps:[bt,Ee,te]}],Zr=[{provide:fr,useValue:"root"},{provide:ct,useFactory:Bi,deps:[]},{provide:xe,useClass:Ni,multi:!0,deps:[O]},{provide:xe,useClass:Li,multi:!0,deps:[O]},zr,Qr,qr,{provide:Ar,useExisting:zr},{provide:jr,useClass:Ci,deps:[]},[]],Gs=(()=>{class i{constructor(){}static \u0275fac=function(e){return new(e||i)};static \u0275mod=Se({type:i});static \u0275inj=ge({providers:[...Zr,...zi],imports:[Lr,Rr]})}return i})();var Zs=(()=>{class i{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(e){return new(e||i)(v(O))};static \u0275prov=C({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var De=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275prov=C({token:i,factory:function(e){let s=null;return e?s=new(e||i):s=v(Ki),s},providedIn:"root"})}return i})(),Ki=(()=>{class i extends De{_doc;constructor(t){super(),this._doc=t}sanitize(t,e){if(e==null)return null;switch(t){case F.NONE:return e;case F.HTML:return wt(e,"HTML")?At(e):br(this._doc,String(e)).toString();case F.STYLE:return wt(e,"Style")?At(e):e;case F.SCRIPT:if(wt(e,"Script"))return At(e);throw new at(5200,!1);case F.URL:return wt(e,"URL")?At(e):Ir(String(e));case F.RESOURCE_URL:if(wt(e,"ResourceURL"))return At(e);throw new at(5201,!1);default:throw new at(5202,!1)}}bypassSecurityTrustHtml(t){return yr(t)}bypassSecurityTrustStyle(t){return vr(t)}bypassSecurityTrustScript(t){return Sr(t)}bypassSecurityTrustUrl(t){return Er(t)}bypassSecurityTrustResourceUrl(t){return _r(t)}static \u0275fac=function(e){return new(e||i)(v(O))};static \u0275prov=C({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var ut={type:null,entityIds:null,skip:!1,payload:null},Re=!1;function Fe(){Re=!1}function N(i,r,t){A(i,r,t),Re=!0}function A(i,r,t){Re===!1&&(ut.type=i,ut.entityIds=r,ut.payload=t)}function Oe(i=!0){ut.skip=i}function Ne(i,r){return function(t,e,s){let n=s.value;return s.value=function(...o){return N(i,r),n.apply(this,o)},s}}function x(i){return i==null}function tt(i){return x(i)===!1}var Lt=new W,lt=new Yt(50,5e3),Ue=new W;function Jr(i){Lt.next(i)}function Xr(i){lt.next(i)}function ti(i,r){Ue.next({storeName:i,action:r})}var ft=typeof window<"u",Ht=!ft,ke=()=>{try{return typeof localStorage<"u"}catch{return!1}},ei=()=>{try{return typeof sessionStorage<"u"}catch{return!1}};var _={},Le={};ft&&(window.$$stores=_,window.$$queries=Le);function He(i){return i&&i.charAt(0).toUpperCase()+i.slice(1)}var xt=[];function qi(i,r={}){if(Ht||!window.__REDUX_DEVTOOLS_EXTENSION__)return;xt.length&&xt.forEach(u=>{u.unsubscribe?u.unsubscribe():u&&u()}),i&&i.run||(i=i||{},i.run=u=>u(),r=i);let s=Object.assign({},{name:"Akita",shallow:!0,storesWhitelist:[]},r),n=s.storesWhitelist,o=window.__REDUX_DEVTOOLS_EXTENSION__.connect(s),a={},l=u=>n.length?n.indexOf(u)>-1:!0;xt.push(lt.subscribe(u=>{l(u)!==!1&&(a=p(c({},a),{[u]:_[u]._value()}),o.send({type:`[${He(u)}] - @@INIT`},a))})),xt.push(Lt.subscribe(u=>{l(u)!==!1&&(delete a[u],o.send({type:`[${u}] - Delete Store`},a))})),xt.push(Ue.subscribe(({storeName:u,action:f})=>{if(l(u)===!1)return;let Mt=f,{type:g,entityIds:y,skip:S}=Mt,P=Qt(Mt,["type","entityIds","skip"]).payload;if(S){Oe(!1);return}let U=_[u];if(!U||r.shallow===!1&&a[u]&&JSON.stringify(U._value())===JSON.stringify(a[u]))return;a=p(c({},a),{[u]:U._value()});let L=He(u),M=tt(y)?`[${L}] - ${g} (ids: ${y})`:`[${L}] - ${g}`;if(r.logTrace&&(console.group(M),console.trace(),console.groupEnd()),r.sortAlphabetically){let yt=Object.keys(a).sort().reduce((vt,Dt)=>(vt[Dt]=a[Dt],vt),{});o.send(c({type:M},P),yt);return}o.send(c({type:M},P),a)})),xt.push(o.subscribe(u=>{if(u.type==="DISPATCH"){if(u.payload.type==="COMMIT"){o.init(a);return}if(u.state){let g=JSON.parse(u.state);for(let y=0,S=Object.keys(g);y<S.length;y++){let w=S[y];_[w]&&i.run(()=>{_[w]._setState(()=>g[w],!1)})}}}}))}var jt=!0;function Qi(){jt=!1,ft&&(delete window.$$stores,delete window.$$queries)}function I(){return jt}function ht(i,r){return r.split(".").length===1?i:r.split(".").slice(1).join(".").split(".").reduce((e,s)=>e&&e[s],i)}function d(i){return typeof i=="function"}function $(i){let r=typeof i;return i!=null&&(r=="object"||r=="function")}function Ct(i,r,t,e=!1){let s=r.split(".");if(s.length===1)return c(c({},i),t);i=c({},i);let n=s.length-2;return r.split(".").slice(1).reduce((a,l,u)=>u!==n?(a[l]=c({},a[l]),a&&a[l]):(a[l]=e||Array.isArray(a[l])||!$(a[l])?t:c(c({},a[l]),t),a&&a[l]),i),i}var ri=!1,Yi=new Yt(1);function je(i){ri=i}function Gi(){return ri}function Zi(i){return i&&d(i.then)}function Bt(i){return Zi(i)||Zt(i)?Gt(i):B(i)}function Ji(i){let r={key:"AkitaStores",enableInNonBrowser:!1,storage:ke()?localStorage:i.storage,deserialize:JSON.parse,serialize:JSON.stringify,include:[],select:[],persistOnDestroy:!1,preStorageUpdate:function(E,m){return m},preStoreUpdate:function(E,m){return m},skipStorageUpdate:Gi,preStorageUpdateOperator:()=>E=>E},{storage:t,enableInNonBrowser:e,deserialize:s,serialize:n,include:o,select:a,key:l,preStorageUpdate:u,persistOnDestroy:f,preStorageUpdateOperator:g,preStoreUpdate:y,skipStorageUpdate:S}=Object.assign({},r,i);if(Ht&&!e||!t)return;let w=o.length>0,P=a.length>0,U,L;w&&(U=o.reduce((E,m)=>{if(d(m))E.fns.push(m);else{let K=m.split(".")[0];E[K]=m}return E},{fns:[]})),P&&(L=a.reduce((E,m)=>(E[m.storeName]=m,E),{}));let M={},Mt={},yt=[],vt=[];function Dt(E){Bt(E).subscribe(()=>{let m=vt.shift();m&&Dt(m)})}let Ii=ke()&&t===localStorage||ei()&&t===sessionStorage;return Bt(t.getItem(l)).subscribe(E=>{let m=$(E)?E:s(E||"{}");function K(h){m.$cache=c(c({},m.$cache||{}),h),m=Object.assign({},m,Mt),vt.push(t.setItem(l,Ii?n(m):m)),Dt(vt.shift())}function St(h,Et){M[h]=_[h]._select(R=>ht(R,Et)).pipe(ur(1),D(R=>P&&L[h]?L[h](R):R),_t(()=>S()===!1),g()).subscribe(R=>{Mt[h]=u(h,R),Promise.resolve().then(()=>K({[h]:_[h]._cache().getValue()}))})}function me(h,Et,R){if(h in m){A("@PersistState"),Et._setState(qt=>Ct(qt,R,y(h,m[h],qt)));let tr=m.$cache?m.$cache[h]:!1;_[h].setHasCache(tr,{restartTTL:!0})}}yt.push(Lt.subscribe(h=>{M[h]&&(f===!1&&K({[h]:!1}),M[h].unsubscribe(),delete M[h])})),yt.push(lt.subscribe(h=>{if(h==="router")return;let Et=_[h];if(w){let R=U[h];if(!R)if(U.fns.some(qt=>qt(h)))R=h;else return;me(h,Et,R),St(h,R)}else me(h,Et,h),St(h,h)})),Yi.next(!0)}),{destroy(){yt.forEach(E=>E.unsubscribe());for(let E=0,m=Object.keys(M);E<m.length;E++){let K=m[E];M[K].unsubscribe()}M={}},clear(){t.clear()},clearStore(E){if(x(E)){Bt(t.setItem(l,"{}")).subscribe();return}let m=t.getItem(l);Bt(m).subscribe(K=>{let St=s(K||"{}");St[E]&&(delete St[E],Bt(t.setItem(l,n(St))).subscribe())})}}}function V(i,r){return i.hasOwnProperty(r)}function k(i){return Array.isArray(i)}function $t(i){return i.hasOwnProperty("active")}function oe(i){return k(i)}function Vt({active:i,ids:r,entities:t}){return oe(i)?ii(i,r):V(t,i)===!1?null:i}function ii(i,r){let t=i.filter(e=>r.indexOf(e)>-1);return t.length===i.length?i:t}function Be({state:i,entities:r,idKey:t,options:e={},preAddEntity:s}){let n={},o=[],a=!1;for(let l of r)if(V(i.entities,l[t])===!1){let u=s(l),f=u[t];n[f]=u,e.prepend?o.unshift(f):o.push(f),a=!0}return a?{newState:p(c({},i),{entities:c(c({},i.entities),n),ids:e.prepend?[...o,...i.ids]:[...i.ids,...o]}),newIds:o}:null}function b(i){return x(i)?[]:Array.isArray(i)?i:[i]}var et="id";function z(i){return k(i)?i.length===0:!1}var si={resettable:!1,ttl:null,producerFn:void 0};function Tt(){return si}function ni(){return si.producerFn}var rt=function(i){return i.Set="Set",i.Add="Add",i.Update="Update",i.Remove="Remove",i}(rt||{});function $e(i,r,t){let e;if(k(i))e=i;else if($(i)){if(x(t))return;i=Object.assign({wrap:!0},i);let s=r.indexOf(t);if(i.prev){let n=s===0;if(n&&!i.wrap)return;e=n?r[r.length-1]:r[s-1]}else if(i.next){let n=r.length===s+1;if(n&&!i.wrap)return;e=n?r[0]:r[s+1]}}else{if(i===t)return;e=i}return e}var Ve=()=>({entities:{},ids:[],loading:!0,error:null});function j(i){return i===void 0}function ze({state:i,ids:r}){if(x(r))return oi(i);let t=i.entities,e={};for(let n of i.ids)r.includes(n)===!1&&(e[n]=t[n]);let s=p(c({},i),{entities:e,ids:i.ids.filter(n=>r.includes(n)===!1)});return $t(i)&&(s.active=Vt(s)),s}function oi(i){return p(c({},i),{entities:{},ids:[],active:oe(i.active)?[]:null})}function Ke(i,r,t){let e={entities:{},ids:[]};for(let s of i){let n=t(s);e.entities[n[r]]=n,e.ids.push(n[r])}return e}function ci(i){return i.entities&&i.ids}function ai(i,r){let t={};for(let e of Object.keys(i))t[e]=r(i[e]);return t}function We({state:i,entities:r,idKey:t,preAddEntity:e,isNativePreAdd:s}){let n,o;if(k(r)){let l=Ke(r,t,e);n=l.entities,o=l.ids}else ci(r)?(n=s?r.entities:ai(r.entities,e),o=r.ids):(n=s?r:ai(r,e),o=Object.keys(n).map(l=>isNaN(l)?l:Number(l)));let a=p(c({},i),{entities:n,ids:o,loading:!1});return $t(i)&&(a.active=Vt(a)),a}function qe(i){Object.freeze(i);let r=typeof i=="function",t=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(i).forEach(function(e){t.call(i,e)&&(!r||e!=="caller"&&e!=="callee"&&e!=="arguments")&&i[e]!==null&&(typeof i[e]=="object"||typeof i[e]=="function")&&!Object.isFrozen(i[e])&&qe(i[e])}),i}function ui(i,r){i||console.error(`@StoreConfig({ name }) is missing in ${r}`)}function Q(i){return i!=null&&`${i}`!="false"}function Pt(i){return Q(i)&&i.constructor.name==="Object"}var pt="akitaConfig";function Qe(i){return function(r){r[pt]={idKey:"id"};for(let t=0,e=Object.keys(i);t<e.length;t++){let s=e[t];s==="name"?r[pt].storeName=i[s]:r[pt][s]=i[s]}}}var rs=new W,li=new nt(!1),Y={activeTransactions:0,batchTransaction:null};function fi(){ae()||(Y.batchTransaction=new W),Y.activeTransactions++,li.next(!0)}function hi(){--Y.activeTransactions===0&&(Y.batchTransaction.next(!0),Y.batchTransaction.complete(),li.next(!1),rs.next(!0))}function ae(){return Y.activeTransactions>0}function Ye(){return Y.batchTransaction?Y.batchTransaction.asObservable():B(!0)}function zt(i,r=void 0){fi();try{return i.apply(r)}finally{N("@Transaction"),hi()}}function ce(){return function(i,r,t){let e=t.value;return t.value=function(...s){return zt(()=>e.apply(this,s),this)},t}}var it=class{constructor(r,t={}){this.options=t,this.inTransaction=!1,this.cache={active:new nt(!1),ttl:null},this.onInit(r)}setLoading(r=!1){r!==this._value().loading&&(I()&&A("Set Loading"),this._setState(t=>p(c({},t),{loading:r})))}setHasCache(r,t={restartTTL:!1}){if(r!==this.cache.active.value&&this.cache.active.next(r),t.restartTTL){let e=this.getCacheTTL();e&&(this.cache.ttl!==null&&clearTimeout(this.cache.ttl),this.cache.ttl=setTimeout(()=>this.setHasCache(!1),e))}}getValue(){return this.storeValue}setError(r){r!==this._value().error&&(I()&&A("Set Error"),this._setState(t=>p(c({},t),{error:r})))}_select(r){return this.store.asObservable().pipe(D(t=>r(t.state)),Jt())}_value(){return this.storeValue}_cache(){return this.cache.active}get config(){return this.constructor[pt]||{}}get storeName(){return this.config.storeName||this.options.storeName||this.options.name}get deepFreeze(){return this.config.deepFreezeFn||this.options.deepFreezeFn||qe}get cacheConfig(){return this.config.cache||this.options.cache}get _producerFn(){return this.config.producerFn||this.options.producerFn||ni()}get resettable(){return tt(this.config.resettable)?this.config.resettable:this.options.resettable}_setState(r,t=!0){if(d(r)){let e=r(this._value());this.storeValue=jt?this.deepFreeze(e):e}else this.storeValue=r;if(!this.store){this.store=new nt({state:this.storeValue}),I()&&this.store.subscribe(({action:e})=>{e&&ti(this.storeName,e)});return}if(ae()){this.handleTransaction();return}this.dispatch(this.storeValue,t)}reset(){this.isResettable()&&(I()&&A("Reset"),this._setState(()=>Object.assign({},this._initialState)),this.setHasCache(!1))}update(r){I()&&A("Update");let t,e=this._value();d(r)?t=d(this._producerFn)?this._producerFn(e,r):r(e):t=r;let s=this.akitaPreUpdate(e,c(c({},e),t)),n=Pt(e)?s:new e.constructor(s);this._setState(n)}updateStoreConfig(r){this.options=c(c({},this.options),r)}akitaPreUpdate(r,t){return t}destroy(){!(ft?window.hmrEnabled:!1)&&this===_[this.storeName]&&(delete _[this.storeName],Jr(this.storeName),this.setHasCache(!1),this.cache.active.complete(),this.store.complete())}onInit(r){_[this.storeName]=this,this._setState(()=>r),Xr(this.storeName),this.isResettable()&&(this._initialState=r),I()&&ui(this.storeName,this.constructor.name)}dispatch(r,t=!0){let e;t&&(e=ut,Fe()),this.store.next({state:r,action:e})}watchTransaction(){Ye().subscribe(()=>{this.inTransaction=!1,this.dispatch(this._value())})}isResettable(){return this.resettable===!1?!1:this.resettable||Tt().resettable}handleTransaction(){this.inTransaction||(this.watchTransaction(),this.inTransaction=!0)}getCacheTTL(){return this.cacheConfig&&this.cacheConfig.ttl||Tt().ttl}};function Ge({state:i,ids:r,idKey:t,newStateOrFn:e,preUpdateEntity:s,producerFn:n,onEntityIdChanges:o}){let a={},l=!1,u;for(let S of r){if(V(i.entities,S)===!1)continue;let w=i.entities[S],P;d(e)?P=d(n)?n(w,e):e(w):P=e;let U=P.hasOwnProperty(t)&&P[t]!==w[t],L;u=S,U&&(l=!0,u=P[t]);let M=c(c({},w),P);Pt(w)?L=M:Pt(P)?L=new w.constructor(M):L=new P.constructor(M),a[u]=s(w,L)}let f=i.ids,g=i.entities;if(l){let[S]=r,y=i.entities,{[S]:w}=y;g=Qt(y,[er(S)]),f=i.ids.map(U=>U===S?u:U),o(S,u)}return p(c({},i),{entities:c(c({},g),a),ids:f})}var pi,dt=class i extends it{constructor(r={},t={}){super(c(c({},Ve()),r),t),this.options=t,this.entityActions=new W,this.entityIdChanges=new W}get selectEntityAction$(){return this.entityActions.asObservable()}get selectEntityIdChanges$(){return this.entityIdChanges.asObservable()}get idKey(){return this.config.idKey||this.options.idKey||et}set(r,t={}){if(x(r))return;I()&&A("Set Entity");let e=this.akitaPreAddEntity===i.prototype.akitaPreAddEntity;this.setHasCache(!0,{restartTTL:!0}),this._setState(s=>{let n=We({state:s,entities:r,idKey:this.idKey,preAddEntity:this.akitaPreAddEntity.bind(this),isNativePreAdd:e});return j(t.activeId)===!1&&(n.active=t.activeId),n}),this.hasInitialUIState()&&this.handleUICreation(),this.entityActions.next({type:rt.Set,ids:this.ids})}add(r,t={loading:!1}){let e=b(r);if(z(e))return;let s=Be({state:this._value(),preAddEntity:this.akitaPreAddEntity.bind(this),entities:e,idKey:this.idKey,options:t});s&&(I()&&A("Add Entity"),s.newState.loading=t.loading,this._setState(()=>s.newState),this.hasInitialUIState()&&this.handleUICreation(!0),this.entityActions.next({type:rt.Add,ids:s.newIds}))}update(r,t){if(j(t)){super.update(r);return}let e=[];if(d(r)?e=this.ids.filter(n=>r(this.entities[n])):e=x(r)?this.ids:b(r),z(e))return;I()&&A("Update Entity",e);let s;this._setState(n=>Ge({idKey:this.idKey,ids:e,preUpdateEntity:this.akitaPreUpdateEntity.bind(this),state:n,newStateOrFn:t,producerFn:this._producerFn,onEntityIdChanges:(o,a)=>{s={oldId:o,newId:a},this.entityIdChanges.next(p(c({},s),{pending:!0}))}})),s&&this.entityIdChanges.next(p(c({},s),{pending:!1})),this.entityActions.next({type:rt.Update,ids:e})}upsert(r,t,e,s={}){let n=b(r),o=g=>y=>V(this.entities,y)===g,a=d(e)?s.baseClass:e?e.baseClass:void 0,l=d(a),u=n.filter(o(!0)),f=n.filter(o(!1)).map(g=>{let y=typeof t=="function"?t({}):t,S=d(e)?e(g,y):y,w=p(c({},S),{[this.idKey]:g});return l?new a(w):w});this.update(u,t),this.add(f),I()&&N("Upsert Entity")}upsertMany(r,t={}){let e=[],s=[],n={};for(let o of r){let a=this.akitaPreCheckEntity(o),l=a[this.idKey];if(V(this.entities,l)){let u=this._value().entities[l],f=c(c({},this._value().entities[l]),a),g=t.baseClass?new t.baseClass(f):f,y=this.akitaPreUpdateEntity(u,g),S=y[this.idKey];n[S]=y,s.push(S)}else{let u=t.baseClass?new t.baseClass(a):a,f=this.akitaPreAddEntity(u),g=f[this.idKey];e.push(g),n[g]=f}}I()&&N("Upsert Many"),this._setState(o=>p(c({},o),{ids:e.length?[...o.ids,...e]:o.ids,entities:c(c({},o.entities),n),loading:!!t.loading})),s.length&&this.entityActions.next({type:rt.Update,ids:s}),e.length&&this.entityActions.next({type:rt.Add,ids:e}),e.length&&this.hasUIStore()&&this.handleUICreation(!0)}replace(r,t){let e=b(r);if(z(e))return;let s={};for(let n of e)s[n]=p(c({},t),{[this.idKey]:n});I()&&A("Replace Entity",r),this._setState(n=>p(c({},n),{entities:c(c({},n.entities),s)}))}move(r,t){let e=this.ids.slice();e.splice(t<0?e.length+t:t,0,e.splice(r,1)[0]),I()&&A("Move Entity"),this._setState(s=>p(c({},s),{entities:c({},s.entities),ids:e}))}remove(r){if(z(this.ids))return;let t=tt(r),e=[];d(r)?e=this.ids.filter(s=>r(this.entities[s])):e=t?b(r):this.ids,!z(e)&&(I()&&A("Remove Entity",e),this._setState(s=>ze({state:s,ids:e})),t||this.setHasCache(!1),this.handleUIRemove(e),this.entityActions.next({type:rt.Remove,ids:e}))}updateActive(r){let t=b(this.active);I()&&A("Update Active",t),this.update(t,r)}setActive(r){let t=$e(r,this.ids,this.active);t!==void 0&&(I()&&A("Set Active",t),this._setActive(t))}addActive(r){let t=b(r);z(t)||t.every(s=>this.active.indexOf(s)>-1)||(I()&&A("Add Active",r),this._setState(s=>{let n=Array.from(new Set([...s.active,...t]));return p(c({},s),{active:n})}))}removeActive(r){let t=b(r);z(t)||!t.some(s=>this.active.indexOf(s)>-1)||(I()&&A("Remove Active",r),this._setState(s=>p(c({},s),{active:Array.isArray(s.active)?s.active.filter(n=>t.indexOf(n)===-1):null})))}toggleActive(r){let t=b(r),e=o=>a=>this.active.includes(a)===o,s=t.filter(e(!0)),n=t.filter(e(!1));this.removeActive(s),this.addActive(n),I()&&N("Toggle Active")}createUIStore(r={},t={}){let e={name:`UI/${this.storeName}`,idKey:this.idKey};return this.ui=new Kt(r,c(c({},e),t)),this.ui}destroy(){super.destroy(),this.ui instanceof i&&this.ui.destroy(),this.entityActions.complete()}akitaPreUpdateEntity(r,t){return t}akitaPreAddEntity(r){return r}akitaPreCheckEntity(r){return r}get ids(){return this._value().ids}get entities(){return this._value().entities}get active(){return this._value().active}_setActive(r){this._setState(t=>p(c({},t),{active:r}))}handleUICreation(r=!1){let t=this.ids,e=d(this.ui._akitaCreateEntityFn),s,n=o=>{let a=this.entities[o],l=e?this.ui._akitaCreateEntityFn(a):this.ui._akitaCreateEntityFn;return c({[this.idKey]:a[this.idKey]},l)};r?s=this.ids.filter(o=>j(this.ui.entities[o])).map(n):s=t.map(n),r?this.ui.add(s):this.ui.set(s)}hasInitialUIState(){return this.hasUIStore()&&j(this.ui._akitaCreateEntityFn)===!1}handleUIRemove(r){this.hasUIStore()&&this.ui.remove(r)}hasUIStore(){return this.ui instanceof Kt}};ot([ce(),H("design:type",Function),H("design:paramtypes",[Object,Object,Object,Object]),H("design:returntype",void 0)],dt.prototype,"upsert",null);ot([ce(),H("design:type",Function),H("design:paramtypes",[typeof(pi=typeof T<"u"&&T)=="function"?pi:Object]),H("design:returntype",void 0)],dt.prototype,"toggleActive",null);var Kt=class extends dt{constructor(r={},t={}){super(r,t)}setInitialEntityState(r){this._akitaCreateEntityFn=r}};function Ze(){return _t(i=>i!=null)}function di(i){return function(r,t){let e=d(i[0]);return i.some(s=>e?s(r)!==s(t):r[s]!==t[s])===!1}}function mt(i){return typeof i=="string"}var Je="akitaQueryConfig";var gt=class{constructor(r){this.store=r,this.__store__=r,I()&&(Le[r.storeName]=this)}select(r){let t;if(d(r))t=r;else if(mt(r))t=e=>e[r];else{if(Array.isArray(r))return this.store._select(e=>e).pipe(Jt(di(r)),D(e=>d(r[0])?r.map(s=>s(e)):r.reduce((s,n)=>(s[n]=e[n],s),{})));t=e=>e}return this.store._select(t)}selectLoading(){return this.select(r=>r.loading)}selectError(){return this.select(r=>r.error)}getValue(){return this.store._value()}selectHasCache(){return this.store._cache().asObservable()}getHasCache(){return this.store._cache().value}get config(){return this.constructor[Je]}};var st=class{constructor(r,t){this.query=r,t&&t.resetFn&&Tt().resettable&&this.onReset(t.resetFn)}getQuery(){return this.query}getStore(){return this.getQuery().__store__}isEntityBased(r){return Q(r)}selectSource(r,t){return this.isEntityBased(r)?this.getQuery().selectEntity(r).pipe(Ze()):t?this.getQuery().select(e=>ht(e,this.withStoreName(t))):this.getQuery().select()}getSource(r,t){if(this.isEntityBased(r))return this.getQuery().getEntity(r);let e=this.getQuery().getValue();return t?ht(e,this.withStoreName(t)):e}withStoreName(r){return`${this.storeName}.${r}`}get storeName(){return this.getStore().storeName}updateStore(r,t,e,s=!1){if(this.isEntityBased(t)){let n=this.getStore();s?n.replace(t,r):n.update(t,r)}else{if(e){this.getStore()._setState(o=>Ct(o,this.withStoreName(e),r,!0));return}let n=s?r:o=>c(c({},o),r);this.getStore()._setState(n)}}onReset(r){let t=this.getStore().reset;this.getStore().reset=(...e)=>{setTimeout(()=>{t.apply(this.getStore(),e),r()})}}};var ls={pagesControls:!1,range:!1,startWith:1,cacheTimeout:void 0,clearStoreWithCache:!0},ue=class extends st{constructor(r,t={}){super(r,{resetFn:()=>{this.initial=!1,this.destroy({clearCache:!0,currentPage:1})}}),this.query=r,this.config=t,this.metadata=new Map,this.pages=new Map,this.pagination={currentPage:1,perPage:0,total:0,lastPage:0,data:[]},this.initial=!0,this.isLoading$=this.query.selectLoading().pipe(or(0)),this.config=c(c({},ls),t);let{startWith:e,cacheTimeout:s}=this.config;this.page=new nt(e),Zt(s)&&(this.clearCacheSubscription=s.subscribe(()=>this.clearCache()))}get pageChanges(){return this.page.asObservable()}get currentPage(){return this.pagination.currentPage}get isFirst(){return this.currentPage===1}get isLast(){return this.currentPage===this.pagination.lastPage}withControls(){return this.config.pagesControls=!0,this}withRange(){return this.config.range=!0,this}setLoading(r=!0){this.getStore().setLoading(r)}update(r){this.pagination=r,this.addPage(r.data)}addPage(r){this.pages.set(this.currentPage,{ids:r.map(t=>t[this.getStore().idKey])}),this.getStore().upsertMany(r)}clearCache(r={}){this.initial||(N("@Pagination - Clear Cache"),r.clearStore!==!1&&(this.config.clearStoreWithCache||r.clearStore)&&this.getStore().remove(),this.pages=new Map,this.metadata=new Map),this.initial=!1}clearPage(r){this.pages.delete(r)}destroy({clearCache:r,currentPage:t}={}){this.clearCacheSubscription&&this.clearCacheSubscription.unsubscribe(),r&&this.clearCache(),j(t)||this.setPage(t),this.initial=!0}isPageActive(r){return this.currentPage===r}setPage(r){(r!==this.currentPage||!this.hasPage(r))&&this.page.next(this.pagination.currentPage=r)}nextPage(){this.currentPage!==this.pagination.lastPage&&this.setPage(this.pagination.currentPage+1)}prevPage(){this.pagination.currentPage>1&&this.setPage(this.pagination.currentPage-1)}setLastPage(){this.setPage(this.pagination.lastPage)}setFirstPage(){this.setPage(1)}hasPage(r){return this.pages.has(r)}getPage(r){let t=this.pagination.currentPage;return this.hasPage(t)?this.selectPage(t):(this.setLoading(!0),Gt(r()).pipe(lr(e=>(t=e.currentPage,zt(()=>{this.setLoading(!1),this.update(e)}),this.selectPage(t)))))}getQuery(){return this.query}refreshCurrentPage(){x(this.currentPage)===!1&&(this.clearPage(this.currentPage),this.setPage(this.currentPage))}getFrom(){return this.isFirst?1:(this.currentPage-1)*this.pagination.perPage+1}getTo(){return this.isLast?this.pagination.total:this.currentPage*this.pagination.perPage}selectPage(r){return this.query.selectAll({asObject:!0}).pipe(It(1),D(t=>{let e=p(c({},this.pagination),{data:this.pages.get(r).ids.map(o=>t[o])}),{range:s,pagesControls:n}=this.config;return isNaN(this.pagination.total)&&(e.lastPage===1?e.total=e.data?e.data.length:0:e.total=e.perPage*e.lastPage,this.pagination.total=e.total),s&&(e.from=this.getFrom(),e.to=this.getTo()),n&&(e.pageControls=fs(this.pagination.total,this.pagination.perPage)),e}))}};ot([Ne("@Pagination - New Page"),H("design:type",Function),H("design:paramtypes",[Object]),H("design:returntype",void 0)],ue.prototype,"update",null);function fs(i,r){let t=Math.ceil(i/r),e=[];for(let s=0;s<t;s++)e.push(s+1);return e}var Xe=function(i){return i.Update="UPDATE",i}(Xe||{}),Gu={[Xe.Update]:"update"},G=function(i){return i.Update="UPDATE",i.AddEntities="ADD_ENTITIES",i.SetEntities="SET_ENTITIES",i.UpdateEntities="UPDATE_ENTITIES",i.RemoveEntities="REMOVE_ENTITIES",i.UpsertEntities="UPSERT_ENTITIES",i.UpsertManyEntities="UPSERT_MANY_ENTITIES",i}(G||{}),Zu={[G.Update]:"update",[G.AddEntities]:"add",[G.SetEntities]:"set",[G.UpdateEntities]:"update",[G.RemoveEntities]:"remove",[G.UpsertEntities]:"upsert",[G.UpsertManyEntities]:"upsertMany"};var le=class{getStoresSnapshot(r=[]){let t={},s=r.length>0?r:Object.keys(_);for(let n=0;n<s.length;n++){let o=s[n];o!=="router"&&(t[o]=_[o]._value())}return t}setStoresSnapshot(r,t){let e=c({skipStorageUpdate:!1,lazy:!1},t);e.skipStorageUpdate&&je(!0);let s=r;mt(r)&&(s=JSON.parse(s));let n=Object.keys(s).length;if(e.lazy)lt.pipe(_t(o=>s.hasOwnProperty(o)),It(n)).subscribe(o=>_[o]._setState(()=>s[o]));else for(let o=0,a=Object.keys(s);o<a.length;o++){let l=a[o];_[l]&&_[l]._setState(()=>s[l])}e.skipStorageUpdate&&je(!1)}},ps=new le;var ds=["*"],fe;function ms(){if(fe===void 0&&(fe=null,typeof window<"u")){let i=window;i.trustedTypes!==void 0&&(fe=i.trustedTypes.createPolicy("angular#components",{createHTML:r=>r}))}return fe}function Wt(i){return ms()?.createHTML(i)||i}function yi(i){return Error(`Unable to find icon with the name "${i}"`)}function gs(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function vi(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function Si(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}var Z=class{url;svgText;options;svgElement;constructor(r,t,e){this.url=r,this.svgText=t,this.options=e}},ys=(()=>{class i{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(t,e,s,n){this._httpClient=t,this._sanitizer=e,this._errorHandler=n,this._document=s}addSvgIcon(t,e,s){return this.addSvgIconInNamespace("",t,e,s)}addSvgIconLiteral(t,e,s){return this.addSvgIconLiteralInNamespace("",t,e,s)}addSvgIconInNamespace(t,e,s,n){return this._addSvgIconConfig(t,e,new Z(s,null,n))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,e,s,n){let o=this._sanitizer.sanitize(F.HTML,s);if(!o)throw Si(s);let a=Wt(o);return this._addSvgIconConfig(t,e,new Z("",a,n))}addSvgIconSet(t,e){return this.addSvgIconSetInNamespace("",t,e)}addSvgIconSetLiteral(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}addSvgIconSetInNamespace(t,e,s){return this._addSvgIconSetConfig(t,new Z(e,null,s))}addSvgIconSetLiteralInNamespace(t,e,s){let n=this._sanitizer.sanitize(F.HTML,e);if(!n)throw Si(e);let o=Wt(n);return this._addSvgIconSetConfig(t,new Z("",o,s))}registerFontClassAlias(t,e=t){return this._fontCssClassesByAlias.set(t,e),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let e=this._sanitizer.sanitize(F.RESOURCE_URL,t);if(!e)throw vi(t);let s=this._cachedIconsByUrl.get(e);return s?B(he(s)):this._loadSvgIconFromConfig(new Z(t,null)).pipe(Rt(n=>this._cachedIconsByUrl.set(e,n)),D(n=>he(n)))}getNamedSvgIcon(t,e=""){let s=Ei(e,t),n=this._svgIconConfigs.get(s);if(n)return this._getSvgFromConfig(n);if(n=this._getIconConfigFromResolvers(e,t),n)return this._svgIconConfigs.set(s,n),this._getSvgFromConfig(n);let o=this._iconSetConfigs.get(e);return o?this._getSvgFromIconSetConfigs(t,o):ir(yi(s))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?B(he(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(D(e=>he(e)))}_getSvgFromIconSetConfigs(t,e){let s=this._extractIconWithNameFromAnySet(t,e);if(s)return B(s);let n=e.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(nr(a=>{let u=`Loading icon set URL: ${this._sanitizer.sanitize(F.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(u)),B(null)})));return sr(n).pipe(D(()=>{let o=this._extractIconWithNameFromAnySet(t,e);if(!o)throw yi(t);return o}))}_extractIconWithNameFromAnySet(t,e){for(let s=e.length-1;s>=0;s--){let n=e[s];if(n.svgText&&n.svgText.toString().indexOf(t)>-1){let o=this._svgElementFromConfig(n),a=this._extractSvgIconFromSet(o,t,n.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Rt(e=>t.svgText=e),D(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?B(null):this._fetchIcon(t).pipe(Rt(e=>t.svgText=e))}_extractSvgIconFromSet(t,e,s){let n=t.querySelector(`[id="${e}"]`);if(!n)return null;let o=n.cloneNode(!0);if(o.removeAttribute("id"),o.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(o,s);if(o.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(o),s);let a=this._svgElementFromString(Wt("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,s)}_svgElementFromString(t){let e=this._document.createElement("DIV");e.innerHTML=t;let s=e.querySelector("svg");if(!s)throw Error("<svg> tag not found");return s}_toSvgElement(t){let e=this._svgElementFromString(Wt("<svg></svg>")),s=t.attributes;for(let n=0;n<s.length;n++){let{name:o,value:a}=s[n];o!=="id"&&e.setAttribute(o,a)}for(let n=0;n<t.childNodes.length;n++)t.childNodes[n].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[n].cloneNode(!0));return e}_setSvgAttributes(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}_fetchIcon(t){let{url:e,options:s}=t,n=s?.withCredentials??!1;if(!this._httpClient)throw gs();if(e==null)throw Error(`Cannot fetch icon from URL "${e}".`);let o=this._sanitizer.sanitize(F.RESOURCE_URL,e);if(!o)throw vi(e);let a=this._inProgressUrlFetches.get(o);if(a)return a;let l=this._httpClient.get(o,{responseType:"text",withCredentials:n}).pipe(D(u=>Wt(u)),ar(()=>this._inProgressUrlFetches.delete(o)),cr());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(t,e,s){return this._svgIconConfigs.set(Ei(t,e),s),this}_addSvgIconSetConfig(t,e){let s=this._iconSetConfigs.get(t);return s?s.push(e):this._iconSetConfigs.set(t,[e]),this}_svgElementFromConfig(t){if(!t.svgElement){let e=this._svgElementFromString(t.svgText);this._setSvgAttributes(e,t.options),t.svgElement=e}return t.svgElement}_getIconConfigFromResolvers(t,e){for(let s=0;s<this._resolvers.length;s++){let n=this._resolvers[s](e,t);if(n)return vs(n)?new Z(n.url,null,n.options):new Z(n,null)}}static \u0275fac=function(e){return new(e||i)(v(Br,8),v(De),v(O,8),v(ct))};static \u0275prov=C({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function he(i){return i.cloneNode(!0)}function Ei(i,r){return i+":"+r}function vs(i){return!!(i.url&&i.options)}var Ss=new X("MAT_ICON_DEFAULT_OPTIONS"),Es=new X("mat-icon-location",{providedIn:"root",factory:_s});function _s(){let i=q(O),r=i?i.location:null;return{getPathname:()=>r?r.pathname+r.search:""}}var _i=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Is=_i.map(i=>`[${i}]`).join(", "),bs=/^url\(['"]?#(.*?)['"]?\)$/,Mh=(()=>{class i{_elementRef=q(pr);_iconRegistry=q(ys);_location=q(Es);_errorHandler=q(ct);_defaultColor;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(t){let e=this._cleanupFontValue(t);e!==this._fontSet&&(this._fontSet=e,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(t){let e=this._cleanupFontValue(t);e!==this._fontIcon&&(this._fontIcon=e,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=rr.EMPTY;constructor(){let t=q(new hr("aria-hidden"),{optional:!0}),e=q(Ss,{optional:!0});e&&(e.color&&(this.color=this._defaultColor=e.color),e.fontSet&&(this.fontSet=e.fontSet)),t||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let e=this._location.getPathname();e!==this._previousPath&&(this._previousPath=e,this._prependPathToReferences(e))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let e=this._location.getPathname();this._previousPath=e,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(e),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){let s=t.childNodes[e];(s.nodeType!==1||s.nodeName.toLowerCase()==="svg")&&s.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,e=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(s=>s.length>0);this._previousFontSetClass.forEach(s=>t.classList.remove(s)),e.forEach(s=>t.classList.add(s)),this._previousFontSetClass=e,this.fontIcon!==this._previousFontIconClass&&!e.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let e=this._elementsWithExternalReferences;e&&e.forEach((s,n)=>{s.forEach(o=>{n.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){let e=t.querySelectorAll(Is),s=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let n=0;n<e.length;n++)_i.forEach(o=>{let a=e[n],l=a.getAttribute(o),u=l?l.match(bs):null;if(u){let f=s.get(a);f||(f=[],s.set(a,f)),f.push({name:o,value:u[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[e,s]=this._splitIconName(t);e&&(this._svgNamespace=e),s&&(this._svgName=s),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(s,e).pipe(It(1)).subscribe(n=>this._setSvgElement(n),n=>{let o=`Error retrieving icon ${e}:${s}! ${n.message}`;this._errorHandler.handleError(new Error(o))})}}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=wr({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(e,s){e&2&&(Cr("data-mat-icon-type",s._usingFontIcon()?"font":"svg")("data-mat-icon-name",s._svgName||s.fontIcon)("data-mat-icon-namespace",s._svgNamespace||s.fontSet)("fontIcon",s._usingFontIcon()?s.fontIcon:null),Pr(s.color?"mat-"+s.color:""),Tr("mat-icon-inline",s.inline)("mat-icon-no-color",s.color!=="primary"&&s.color!=="accent"&&s.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Or],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:ds,decls:1,vars:0,template:function(e,s){e&1&&(Mr(),Dr(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return i})();var Fh=new X("ARTWORK_PORT");function As(){return{artPieces:[],lastArtPiecesUpdate:void 0,imageCache:[]}}var de=class pe extends it{constructor(){super(As())}static{this.\u0275fac=function(t){return new(t||pe)}}static{this.\u0275prov=C({token:pe,factory:pe.\u0275fac,providedIn:"root"})}};de=ot([Qe({name:"session"})],de);var Lh=(()=>{class i extends gt{constructor(t){super(t),this.store=t,this.getArtPiecesObservable=this.select(({artPieces:e})=>[...e])}get selectArtPieces(){return this.getValue().artPieces}get selectLastArtPiecesUpdate(){return this.getValue().lastArtPiecesUpdate}getThumbnailByTokenId(t){return this.getValue().imageCache.find(e=>e?.tokenId===t)}static{this.\u0275fac=function(e){return new(e||i)(v(de))}}static{this.\u0275prov=C({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var xs=function(i){return i.MEDIUM="Medium",i.HEIGHT="Height",i.WIDTH="Width",i.UNIT="Unit",i.YEAR="Year",i.IMAGETYPE="Image Type",i.ARTIST="Artist",i.PROJECT="Project",i.DESC_AUTHOR="Description Author",i.DESC_LANG="Description language",i.VERSION="Version",i}(xs||{}),Cs=function(i){return i.FRONTAL="Frontal view",i.PROGRESS="Work in progress",i.DETAIL="Detail",i}(Cs||{}),Ts=function(i){return i.YEAR="year",i.SIZE="size",i.MEDIUM="medium",i}(Ts||{}),jh=["23","24","25","26","30","34","37","58","59","61","64","66","70","71","72","74","75","77","94","97","112","114","115","118","117","126","136","159","161","163","165"];export{zr as a,Ys as b,Gs as c,Zs as d,qi as e,Qi as f,Ji as g,Mh as h,Fh as i,de as j,Lh as k,xs as l,Cs as m,Ts as n,jh as o};
