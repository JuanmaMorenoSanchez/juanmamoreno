import{a as w,b as c}from"./chunk-GXP6KTCU.js";import{b as u}from"./chunk-AVJ7DTKU.js";import{n as v,o as l}from"./chunk-I4HAE3AK.js";import"./chunk-O2D7QXJI.js";import{Fb as r,Rb as a,ac as f,bc as h,cc as m,ea as o,la as d,ob as s}from"./chunk-T2HLDYJB.js";import{g as y}from"./chunk-AP5KEWPN.js";var C=y(w());var R=["container"],g=(()=>{class t{constructor(){this.sessionQuery=o(l),this.store=o(v),this.onWindowResize=e=>{this.p5?.resizeCanvas(this.div.nativeElement.offsetWidth,this.div.nativeElement.offsetHeight)},this.createCanvas=()=>{this.p5=new C.default(e=>this.logic(e,this.sessionQuery,this.store))},this.destroyCanvas=()=>{this.p5?.noCanvas()},window.onresize=this.onWindowResize}ngOnInit(){this.createCanvas()}ngOnChanges(e){e.logic&&!e.logic.firstChange&&(this.destroyCanvas(),this.createCanvas())}ngOnDestroy(){this.destroyCanvas()}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=s({type:t,selectors:[["app-canvas-container"]],viewQuery:function(i,n){if(i&1&&f(R,5),i&2){let p;h(p=m())&&(n.div=p.first)}},inputs:{identifier:"identifier",logic:"logic"},features:[d],decls:2,vars:1,consts:[["container",""],[3,"id"]],template:function(i,n){i&1&&a(0,"div",1,0),i&2&&r("id",n.identifier)},encapsulation:2})}}return t})();var j=(()=>{class t{constructor(){this.activatedRoute=o(u),this.id=this.activatedRoute.snapshot.params.id,this.logic=c.find(e=>this.id===e.id).script}ngOnInit(){this.routeSub=this.activatedRoute.params.subscribe(e=>{this.id=e.id,this.logic=c.find(i=>this.id===i.id).script})}get foundCanvas(){return!!this.id&&!!this.logic}ngOnDestroy(){this.routeSub?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=s({type:t,selectors:[["app-generative-piece"]],decls:1,vars:2,consts:[[3,"identifier","logic"]],template:function(i,n){i&1&&a(0,"app-canvas-container",0),i&2&&r("identifier",n.id)("logic",n.logic)},dependencies:[g],encapsulation:2})}}return t})();export{j as GenerativePieceComponent};
